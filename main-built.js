/**
 * @license RequireJS text 2.0.3 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/text for details
 */

define("text",["module"],function(e){var t,n,r=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],i=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,s=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,o=typeof location!="undefined"&&location.href,u=o&&location.protocol&&location.protocol.replace(/\:/,""),a=o&&location.hostname,f=o&&(location.port||undefined),l=[],c=e.config&&e.config()||{};t={version:"2.0.3",strip:function(e){if(e){e=e.replace(i,"");var t=e.match(s);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:c.createXhr||function(){var e,t,n;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;if(typeof ActiveXObject!="undefined")for(t=0;t<3;t+=1){n=r[t];try{e=new ActiveXObject(n)}catch(i){}if(e){r=[n];break}}return e},parseName:function(e){var t=!1,n=e.indexOf("."),r=e.substring(0,n),i=e.substring(n+1,e.length);return n=i.indexOf("!"),n!==-1&&(t=i.substring(n+1,i.length),t=t==="strip",i=i.substring(0,n)),{moduleName:r,ext:i,strip:t}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,r,i){var s,o,u,a=t.xdRegExp.exec(e);return a?(s=a[2],o=a[3],o=o.split(":"),u=o[1],o=o[0],(!s||s===n)&&(!o||o.toLowerCase()===r.toLowerCase())&&(!u&&!o||u===i)):!0},finishLoad:function(e,n,r,i){r=n?t.strip(r):r,c.isBuild&&(l[e]=r),i(r)},load:function(e,n,r,i){if(i.isBuild&&!i.inlineText){r();return}c.isBuild=i.isBuild;var s=t.parseName(e),l=s.moduleName+"."+s.ext,h=n.toUrl(l),p=c.useXhr||t.useXhr;!o||p(h,u,a,f)?t.get(h,function(n){t.finishLoad(e,s.strip,n,r)},function(e){r.error&&r.error(e)}):n([l],function(e){t.finishLoad(s.moduleName+"."+s.ext,s.strip,e,r)})},write:function(e,n,r,i){if(l.hasOwnProperty(n)){var s=t.jsEscape(l[n]);r.asModule(e+"!"+n,"define(function () { return '"+s+"';});\n")}},writeFile:function(e,n,r,i,s){var o=t.parseName(n),u=o.moduleName+"."+o.ext,a=r.toUrl(o.moduleName+"."+o.ext)+".js";t.load(u,r,function(n){var r=function(e){return i(a,e)};r.asModule=function(e,t){return i.asModule(e,a,t)},t.write(e,u,r,s)},s)}};if(c.env==="node"||!c.env&&typeof process!="undefined"&&process.versions&&!!process.versions.node)n=require.nodeRequire("fs"),t.get=function(e,t){var r=n.readFileSync(e,"utf8");r.indexOf("ï»¿")===0&&(r=r.substring(1)),t(r)};else if(c.env==="xhr"||!c.env&&t.createXhr())t.get=function(e,n,r){var i=t.createXhr();i.open("GET",e,!0),c.onXhr&&c.onXhr(i,e),i.onreadystatechange=function(t){var s,o;i.readyState===4&&(s=i.status,s>399&&s<600?(o=new Error(e+" HTTP status: "+s),o.xhr=i,r(o)):n(i.responseText))},i.send(null)};else if(c.env==="rhino"||!c.env&&typeof Packages!="undefined"&&typeof java!="undefined")t.get=function(e,t){var n,r,i="utf-8",s=new java.io.File(e),o=java.lang.System.getProperty("line.separator"),u=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(s),i)),a="";try{n=new java.lang.StringBuffer,r=u.readLine(),r&&r.length()&&r.charAt(0)===65279&&(r=r.substring(1)),n.append(r);while((r=u.readLine())!==null)n.append(o),n.append(r);a=String(n.toString())}finally{u.close()}t(a)};return t}),define("text!templates/app.html",[],function(){return'\r\n\r\n<div class="span4">\r\n<h2>Goals By Year</h2>\r\n<table cellpadding="0" cellspacing="0" class="table table-bordered table-striped table-hover scores">\r\n    <thead><tr><th colspan="2">Goal</th><th>Last Year</th><th>This Year</th><th>Year Diff</th><th>Goal</th><th>Goal Diff</th></tr></thead>\r\n    <tbody id="goallist"></tbody>\r\n</table>\r\n</div>\r\n<div class="span4">\r\n<h2>Handicap</h2>\r\n<table cellpadding="0" cellspacing="0" class="table table-bordered table-striped table-hover scores"></table>\r\n</div>\r\n<div class="span12">\r\n<h2>Recent Scores\r\n    <button class="btn btn-mini" type="button" data-toggle="modal" data-target="#bookModal"><span class="icon-plus-sign"></span></button>\r\n</h2>\r\n<table cellpadding="0" cellspacing="0" class="table table-bordered table-striped table-hover scores">\r\n            <thead>\r\n    <tr>\r\n        <th rowspan="2">Date</th>\r\n        <th rowspan="2">Course</th>\r\n        <th rowspan="2">Score</th>\r\n        <th rowspan="2">Handicap</th>\r\n        <th rowspan="2">GIR</th>\r\n        <th colspan="3">Putts</th>\r\n        <th  class="shortGame" colspan="2">Avg Putts</th>\r\n        <th class="shortGame" colspan="3">Chips</th>\r\n        <th class="shortGame" colspan="2">Scramble</th>\r\n        <th class="shortGame" colspan="2">Short Game</th>\r\n        \r\n        <th rowspan="2">Ch 15</th>\r\n        \r\n        \r\n        <th colspan="2" class="driving">Fairways</th>\r\n        <th rowspan="2" class="driving" title="Driver Penalty Points">Dr Pen Pts</th>\r\n        <th colspan="2" class="driving">Playable</th>\r\n        <th class="scoreRow" rowspan="2" title="Penalties">Pens</th>\r\n        <th class="scoreRow" rowspan="2" title="Extras">EX</th>\r\n        <th class="scoreRow" rowspan="2" title="Eagles">-2</th>\r\n        <th class="scoreRow" rowspan="2" title="Birdies">-1</th>\r\n        <th class="scoreRow" rowspan="2" title="Pars">0</th>\r\n        <th class="scoreRow" rowspan="2" title="Bogies">+1</th>\r\n        <th class="scoreRow" rowspan="2" title="Doubles">+2</th>\r\n        <th class="scoreRow" rowspan="2" title="Others">+3</th>\r\n        \r\n    </tr>\r\n    <tr>\r\n        <th>#</th><!--putts -->\r\n        <th>1</th><!--putts -->\r\n        <th>3</th><!--putts -->\r\n        <th class="shortGame">w/ Chip</th><!--avgputts -->\r\n        <th class="shortGame">w/o Chip</th><!--avgputts -->\r\n        <th class="shortGame">In</th><!--chips -->\r\n        <th class="shortGame">#</th><!--chips -->\r\n        <th class="shortGame" title="More then one chip on a hole">EX</th><!--chips -->\r\n        <th class="shortGame">#</th><!--scramble -->\r\n        <th class="shortGame">%</th><!--scramble -->\r\n        \r\n        <th class="shortGame">#</th><!--shortgame -->\r\n        <th class="shortGame">%</th><!--shortgame -->\r\n\r\n        <th class="driving">#</th><!--fairways -->\r\n        <th class="driving">%</th><!--fairways -->\r\n        <th class="driving">#</th><!--playable -->\r\n        <th class="driving">%</td><!--playable -->\r\n        \r\n    </tr>\r\n	</thead>\r\n        <tbody id="recentTable">\r\n        </tbody>\r\n    </table>\r\n</div>'}),define("views/app",["text!templates/app.html"],function(e){var t=Backbone.View.extend({id:"main",tagName:"div",className:"container-fluid",el:"#score-app",template:_.template(e),events:{},initialize:function(){console.log("appview initialized")},render:function(){return console.log("appview rendered"),this.$el.html(this.template()),this}});return t});var XDate=function(e,t,n,r){function T(){return N(this instanceof T?this:new T,arguments)}function N(t,n){var r=n.length,i;nt(n[r-1])&&(i=n[--r],n=Y(n,0,r));if(!r)t[0]=new e;else if(r==1){var s=n[0];s instanceof e||tt(s)?t[0]=new e(+s):s instanceof T?t[0]=W(s):et(s)&&(t[0]=new e(0),t=H(s,i||!1,t))}else t[0]=new e(E.apply(e,n)),i||(t[0]=J(t[0]));return nt(i)&&k(t,i),t}function C(e){return e[0].toString===S}function k(t,n,r){return n?C(t)||(r&&(t[0]=$(t[0])),t[0].toString=S):C(t)&&(r?t[0]=J(t[0]):t[0]=new e(+t[0])),t}function L(e,t,n,r,u){var a=G(X,e[0],u),f=G(V,e[0],u),l=t==s?n%12:a(s),c=!1;r.length==2&&nt(r[1])&&(c=r[1],r=[n]),f(t,r),c&&a(s)!=l&&(f(s,[a(s)-1]),f(o,[K(a(i),a(s))]))}function A(e,n,r,i){r=Number(r);var s=t.floor(r);e["set"+g[n]](e["get"+g[n]]()+s,i||!1),s!=r&&n<l&&A(e,n+1,(r-s)*b[n],i)}function O(e,n,r){e=e.clone().setUTCMode(!0,!0),n=T(n).setUTCMode(!0,!0);var u=0;if(r==i||r==s){for(var a=l,f;a>=r;a--)u/=b[a],u+=X(n,!1,a)-X(e,!1,a);r==s&&(u+=(n.getFullYear()-e.getFullYear())*12)}else if(r==o){var c=e.toDate().setUTCHours(0,0,0,0),h=n.toDate().setUTCHours(0,0,0,0);u=t.round((h-c)/d)+(n-h-(e-c))/d}else u=(n-e)/[36e5,6e4,1e3,1][r-3];return u}function M(e){return _(e(i),e(s),e(o))}function _(n,r,i){var s=new e(E(n,r,i)),o=D(n),u=o;if(s<o)u=D(n-1);else{var a=D(n+1);s>=a&&(u=a)}return t.floor(t.round((s-u)/d)/7)+1}function D(t){var n=new e(E(t,0,4));return n.setUTCDate(n.getUTCDate()-(n.getUTCDay()+6)%7),n}function P(e,t,n,s){var u=G(X,e,s),a=G(V,e,s),f=D(n===r?u(i):n);s||(f=J(f)),e.setTime(+f),a(o,[u(o)+(t-1)*7])}function H(t,n,r){var i=T.parsers,s=0,o;for(;s<i.length;s++){o=i[s](t,n,r);if(o)return o}return r[0]=new e(t),r}function B(t,n,r){var i=t.match(/^(\d{4})(-(\d{2})(-(\d{2})([T ](\d{2}):(\d{2})(:(\d{2})(\.(\d+))?)?(Z|(([-+])(\d{2})(:?(\d{2}))?))?)?)?)?$/);if(i){var s=new e(E(i[1],i[3]?i[3]-1:0,i[5]||1,i[7]||0,i[8]||0,i[10]||0,i[12]?Number("0."+i[12])*1e3:0));return i[13]?i[14]&&s.setUTCMinutes(s.getUTCMinutes()+(i[15]=="-"?1:-1)*(Number(i[16])*60+(i[18]?Number(i[18]):0))):n||(s=J(s)),r.setTime(+s)}}function j(e,t,n,r,i){function f(e){return n[e]||u[e]}function l(e){if(r){var t=(e==c?o:e)-1;for(;t>=0;t--)r.push(a(t))}return a(e)}var s=T.locales,u=s[T.defaultLocale]||{},a=G(X,e,i);return n=(et(n)?s[n]:n)||{},F(e,t,l,f,i)}function F(e,t,n,r,i){var s,o,u="";while(s=t.match(w))u+=t.substr(0,s.index),s[1]?u+=I(e,s[1],n,r,i):s[3]?(o=F(e,s[4],n,r,i),parseInt(o.replace(/\D/g,""),10)&&(u+=o)):u+=s[7]||"'",t=t.substr(s.index+s[0].length);return u+t}function I(e,t,n,i,s){var o=t.length,u,a="";while(o>0)u=q(e,t.substr(0,o),n,i,s),u!==r?(a+=u,t=t.substr(o),o=t.length):o--;return a+t}function q(e,t,n,r,h){var p=T.formatters[t];if(et(p))return F(e,p,n,r,h);if(rt(p))return p(e,h||!1,r);switch(t){case"fff":return it(n(l),3);case"s":return n(f);case"ss":return it(n(f));case"m":return n(a);case"mm":return it(n(a));case"h":return n(u)%12||12;case"hh":return it(n(u)%12||12);case"H":return n(u);case"HH":return it(n(u));case"d":return n(o);case"dd":return it(n(o));case"ddd":return r("dayNamesShort")[n(c)]||"";case"dddd":return r("dayNames")[n(c)]||"";case"M":return n(s)+1;case"MM":return it(n(s)+1);case"MMM":return r("monthNamesShort")[n(s)]||"";case"MMMM":return r("monthNames")[n(s)]||"";case"yy":return(n(i)+"").substring(2);case"yyyy":return n(i);case"t":return U(n,r).substr(0,1).toLowerCase();case"tt":return U(n,r).toLowerCase();case"T":return U(n,r).substr(0,1);case"TT":return U(n,r);case"z":case"zz":case"zzz":return h?"Z":R(e,t);case"w":return M(n);case"ww":return it(M(n));case"S":var d=n(o);if(d>10&&d<20)return"th";return["st","nd","rd"][d%10-1]||"th"}}function R(e,n){var r=e.getTimezoneOffset(),i=r<0?"+":"-",s=t.floor(t.abs(r)/60),o=t.abs(r)%60,u=s;return n=="zz"?u=it(s):n=="zzz"&&(u=it(s)+":"+it(o)),i+u}function U(e,t){return e(u)<12?t("amDesignator"):t("pmDesignator")}function z(e){return!isNaN(+e[0])}function W(t){var n=new e(+t[0]);return C(t)&&(n.toString=S),n}function X(e,t,n){return e["get"+(t?"UTC":"")+g[n]]()}function V(e,t,n,r){e["set"+(t?"UTC":"")+g[n]].apply(e,r)}function $(t){return new e(E(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()))}function J(t){return new e(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds())}function K(t,n){return 32-(new e(E(t,n,32))).getUTCDate()}function Q(e){return function(){return e.apply(r,[this].concat(Y(arguments)))}}function G(e){var t=Y(arguments,1);return function(){return e.apply(r,t.concat(Y(arguments)))}}function Y(e,t,i){return n.prototype.slice.call(e,t||0,i===r?e.length:i)}function Z(e,t){for(var n=0;n<e.length;n++)t(e[n],n)}function et(e){return typeof e=="string"}function tt(e){return typeof e=="number"}function nt(e){return typeof e=="boolean"}function rt(e){return typeof e=="function"}function it(e,t){t=t||2,e+="";while(e.length<t)e="0"+e;return e}var i=0,s=1,o=2,u=3,a=4,f=5,l=6,c=7,h=8,p=9,d=864e5,v="yyyy-MM-dd'T'HH:mm:ss(.fff)",m=v+"zzz",g=["FullYear","Month","Date","Hours","Minutes","Seconds","Milliseconds","Day","Year"],y=["Years","Months","Days"],b=[12,31,24,60,60,1e3,1],w=new RegExp("(([a-zA-Z])\\2*)|(\\((('.*?'|\\(.*?\\)|.)*?)\\))|('(.*?)')"),E=e.UTC,S=e.prototype.toUTCString,x=T.prototype;return x.length=1,x.splice=n.prototype.splice,x.getUTCMode=Q(C),x.setUTCMode=Q(k),x.getTimezoneOffset=function(){return C(this)?0:this[0].getTimezoneOffset()},Z(g,function(e,t){x["get"+e]=function(){return X(this[0],C(this),t)},t!=h&&(x["getUTC"+e]=function(){return X(this[0],!0,t)}),t!=c&&(x["set"+e]=function(e){return L(this,t,e,arguments,C(this)),this},t!=h&&(x["setUTC"+e]=function(e){return L(this,t,e,arguments,!0),this},x["add"+(y[t]||e)]=function(e,n){return A(this,t,e,n),this},x["diff"+(y[t]||e)]=function(e){return O(this,e,t)}))}),x.getWeek=function(){return M(G(X,this,!1))},x.getUTCWeek=function(){return M(G(X,this,!0))},x.setWeek=function(e,t){return P(this,e,t,!1),this},x.setUTCWeek=function(e,t){return P(this,e,t,!0),this},x.addWeeks=function(e){return this.addDays(Number(e)*7)},x.diffWeeks=function(e){return O(this,e,o)/7},T.parsers=[B],T.parse=function(e){return+T(""+e)},x.toString=function(e,t,n){return e===r||!z(this)?this[0].toString():j(this,e,t,n,C(this))},x.toUTCString=x.toGMTString=function(e,t,n){return e===r||!z(this)?this[0].toUTCString():j(this,e,t,n,!0)},x.toISOString=function(){return this.toUTCString(m)},T.defaultLocale="",T.locales={"":{monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],amDesignator:"AM",pmDesignator:"PM"}},T.formatters={i:v,u:m},Z(["getTime","valueOf","toDateString","toTimeString","toLocaleString","toLocaleDateString","toLocaleTimeString","toJSON"],function(e){x[e]=function(){return this[0][e]()}}),x.setTime=function(e){return this[0].setTime(e),this},x.valid=Q(z),x.clone=function(){return new T(this)},x.clearTime=function(){return this.setHours(0,0,0,0)},x.toDate=function(){return new e(+this[0])},T.now=function(){return+(new e)},T.today=function(){return(new T).clearTime()},T.UTC=E,T.getDaysInMonth=K,typeof module!="undefined"&&module.exports&&(module.exports=T),typeof define=="function"&&define.amd&&define("xdate",[],function(){return T}),T}(Date,Math,Array),ScoreCalculator=function(){function t(){return n(this instanceof t?this:new t,arguments)}function n(e,t){return e}var e=t.prototype;e.calc=function(e,t,n,i,o){if(i===null)throw"Course cannot be null";var u={onePutts:0,threePutts:0,chipIn:0,putts:0,handicap:0,birdies:0,eagles:0,pars:0,bogies:0,others:0,doubles:0};return u.handicap=s(e,t,o.rating,o.slope),u=r(u,n,o),u.shortGamePercent=Math.round(u.shortGame/e*1e3)/10,u.fairwayPercent=Math.round(u.fairways/u.totalFairways*1e3)/10,u.playablePercent=Math.round(u.playable/u.totalFairways*1e3)/10,u};var r=function(e,t,n){e.GIR=0,e.ch15=0,e.chips=0,e.extraChips=0,e.eagles=0,e.totalFairways=0,e.fairways=0,e.playable=0,e.drivePoints=0,e.penalties=0,e.holesWChip=0,e.holesNoChip=0,e.puttsAfterChip=0,e.puttsAfterNoChip=0,e.scrambleChances=0,e.scrambles=0,e.extra=0;for(var r=0;r<t.length;r++){var s=i(t[r],n.holes[r]);e.putts+=s.putts,s.GIR&&e.GIR++,s.Ch15&&e.ch15++,e.chips+=s.chips,s.chips>1&&(s.extraChips=s.chips-1,e.extraChips+=s.extraChips),e.penalties+=s.penalties,e.extra+=s.extra,s.par==s.score?e.pars++:s.par+1==s.score?e.bogies++:s.par+2==s.score?e.doubles++:s.par+2<s.score?e.others++:s.par-2>=s.score?e.eagles++:e.birdies++,s.par>3&&(e.totalFairways++,/[Hh]it/.test(s.fairway)&&e.fairways++,s.drivePoints&&(e.drivePoints+=s.drivePoints),s.playable&&e.playable++),s.putts==0?e.chipIn++:s.putts==1?e.onePutts++:s.putts==3&&e.threePutts++,s.chips>0?(e.holesWChip++,e.puttsAfterChip+=s.putts):(e.holesNoChip++,e.puttsAfterNoChip+=s.putts),s.scramble!=null&&e.scrambleChances++,s.scramble&&e.scrambles++}return e.shortGame=e.chips+e.putts,e.scrambleChances>0?e.scramblePercent=Math.round(e.scrambles/e.scrambleChances*100):e.scramblePercnet="N/A",e.holesWChip>0&&(e.avgPuttsWithChip=e.puttsAfterChip/e.holesWChip),e.holesNoChip<18&&(e.avgPuttsWithoutChip=(e.putts-e.puttsAfterChip)/(18-e.holesWChip)),e.avgPuttsWithChip=Math.round(e.avgPuttsWithChip*10)/10,e.avgPuttsWithoutChip=Math.round(e.avgPuttsWithoutChip*10)/10,e.puttsPerHole=Math.round(e.putts/18*10)/10,e},i=function(e,t){var n=e;return n.GIR=!1,e.putts&&t.par&&e.score&&(n.GIR=t.par-2>=e.score-e.putts),n.Ch15=n.GIR&&n.putts>2,n.shortGame=n.chips+n.putts,n.extra=e.score-e.shortGame-(t.par-2),n.par=t.par,n.yards=t.yards,n.fairway=e.fairway,n.chips&&n.chips>0?n.scramble=n.chips==1&&n.putts<=1:n.scramble=null,e.penalties?n.penalties=e.penalties:n.penalties=0,e.playable?n.playable=!0:n.playable=!1,n},s=function(e,t,n,r){var i;return t&&t<e?i=t:i=e,Math.round((i-n)/r*113*100)/100};return typeof module!="undefined"&&module.exports&&(module.exports=t),typeof define=="function"&&define.amd&&define("scoreCalculator",[],function(){return t}),t}();define("models/score",["xdate","scoreCalculator"],function(e,t){var n=Backbone.Model.extend({url:"scores",initialize:function(){var t,n,r,i;this.get("isGoal")?(t="Gaol",n="Goal",r="goalFoot"):(r="",t=(new e(this.get("date"),!0)).toString("yyyy-MM-dd"),n=this.get("course")._id.substring(0,10)+'<span class="slash">-</span>'+this.get("tee").name.substring(0,10));var s=this.get("stats");i=s.scrambles+"/"+s.scrambleChances;var o=s.fairways+"/"+s.totalFairways,u=s.playable+"/"+s.totalFairways,a=this.get("eagles"),f=a&&a>0?"*":"";this.set({scrambleText:i,fairwayText:o,playableText:u,prettyDate:t,eagleAstrix:f,shortName:n,className:r})}});return n}),define("collections/scorelist",["models/score"],function(e){var t=Backbone.Collection.extend({model:e,url:"scores",last20:function(){var e=this.sortBy(function(e){return e.get("prettyDate")}).reverse();return e.length>20&&(e=e.slice(0,20)),e}});return t}),define("text!templates/score.html",[],function(){return'\r\n<div class="scoreDate span1">{{prettyDate}}</div>\r\n<div class="course span4">{{course.name}}<br />\r\n<span class="tee">{{tee.name}}</div>\r\n<div class="score span1">{{score}}<br />\r\n<span class="tee">{{stats.handicap}}<br />\r\n<span class="tee">{{stats.overPar}}</div>\r\n<div class="span2">\r\n<dl>\r\n    <dd>Birdies</dd>\r\n    <dt>{{stats.birdies+stats.eagles}}{{eagleAstrix}}</dt>\r\n</dl>\r\n<dl>\r\n    <dd>Pars</dd>\r\n    <dt>{{stats.pars}}</dt>\r\n</dl>\r\n<dl>\r\n    <dd>Bogies</dd>\r\n    <dt>{{stats.bogies}}</dt>\r\n</dl>\r\n<dl>\r\n    <dd>Doubles</dd>\r\n    <dt>{{stats.doubles}}</dt>\r\n</dl>\r\n<dl>\r\n    <dd>Others</dd>\r\n    <dt>{{stats.others}}</dt>\r\n</dl>\r\n</div>\r\n<div class="span2">\r\n<dl>\r\n    <dd>Putts</dd>\r\n    <dt>{{stats.putts}}</dt>\r\n</dl>\r\n<dl>\r\n    <dd>1 putts</dd>\r\n    <dt>{{stats.onePutts}}</dt>\r\n</dl>\r\n<dl>\r\n    <dd>3 putts</dd>\r\n    <dt>{{stats.threePutts}}</dt>\r\n</dl>\r\n<dl>\r\n    <dd>Ch15</dd>\r\n    <dt>{{stats.ch15}}</dt>\r\n</dl>\r\n<dl>\r\n    <dd>/ Hole</dd>\r\n    <dt>{{stats.puttsPerHole}}</dt>\r\n</dl>\r\n</div>\r\n<div class="span2">\r\n<dl>\r\n    <dd>Chips</dd>\r\n    <dt>{{stats.chips}}</dt>\r\n</dl>\r\n<dl>\r\n    <dd>Chip In</dd>\r\n    <dt>{{stats.chipIn}}</dt>\r\n</dl>\r\n<dl>\r\n    <dd>Extra Chips</dd>\r\n    <dt>{{stats.extraChips}}</dt>\r\n</dl>\r\n<dl>\r\n    <dd>Scrambles</dd>\r\n</dl>\r\n<dl>\r\n<dd>{{stats.scrambles}} of {{stats.scrambleChances}}</dd>\r\n</dl>\r\n<dl>\r\n    <dd>Scramble %</dd>\r\n    <dt>{{stats.scramblePercent}}</dt>\r\n</dl>\r\n\r\n</div>\r\n<div class="span2">\r\n<dl>\r\n    <dd>GIR</dd>\r\n    <dt>{{stats.GIR}}</dt>\r\n</dl>\r\n<dl>\r\n    <dd>Short Game</dd>\r\n    <dt>{{stats.shortGame}}</dt>\r\n</dl>\r\n<dl>\r\n    <dd>Putts w/ Chip</dd>\r\n    <dt>{{stats.avgPuttsWithChip}}</dt>\r\n</dl>\r\n<dl>\r\n    <dd>Putts w/ Chip</dd>\r\n    <dt>{{stats.avgPuttsWithoutChip}}</dt>\r\n</dl>\r\n<dl>\r\n    <dd>Short Game %</dd>\r\n    <dt>{{stats.shoreGamePercent}}</dt>\r\n</dl>\r\n<dl>\r\n    <dd>Fairways</dd>\r\n</dl>\r\n<dl>\r\n    <dt>{{stats.fairways}} of {{stats.totalFairways}}</dt>\r\n</dl>\r\n</div>\r\n'}),define("views/score",["text!templates/score.html"],function(e){var t=Backbone.View.extend({tagName:"div",className:"card row-fluid",template:_.template(e),events:{},initialize:function(){this.model.on("change",this.render,this),this.model.on("destroy",this.remove,this)},render:function(){var e=$(this.el),t=this.template(this.model.toJSON());return e.html(t),this}});return t}),define("views/recent",["views/score"],function(e){var t=Backbone.View.extend({el:"#recentScores",tagName:"div",events:{},initialize:function(){this.collection.on("add",this.render,this)},render:function(){var t=this;return t.$el.empty(),this.collection.last20().forEach(function(n){var r=new e({model:n});t.$el.append(r.render().el)}),this}});return t}),define("text!templates/table.html",[],function(){return'<td class="text"><a href="" id="{{_id}}" class="scorelink">{{prettyDate}}</a></td>\r\n<td class="text courseName" title="{{course.name}} - {{tee.name}}">{{shortName}}</td>\r\n<td>{{score}}</td>\r\n<td>{{stats.handicap.toFixed(2)}}</td>\r\n<td>{{stats.GIR}}</td>\r\n<td>{{stats.putts}}</td><td>{{stats.onePutts}}</td><td>{{stats.threePutts}}</td>\r\n<td class="shortGame">{{stats.avgPuttsWithChip.toFixed(2)}}</td>\r\n<td class="shortGame">{{stats.avgPuttsWithoutChip.toFixed(2)}}</td>\r\n<td class="shortGame">{{stats.chipIn}}</td>\r\n<td class="shortGame">{{stats.chips}}</td>\r\n<td class="shortGame">{{stats.extraChips}} </td>\r\n<td class="shortGame" title="{{stats.scrambles}} / {{stats.scrambleChances}}">{{scrambleText}}</td>\r\n<td class="shortGame">{{stats.scramblePercent.toFixed(0)}}</td>\r\n\r\n<td class="shortGame">{{stats.shortGame}}</td>\r\n<td class="shortGame">{{stats.shortGamePercent.toFixed(0)}}</td>\r\n\r\n<td>{{stats.ch15}}</td>\r\n<!-- driving -->\r\n<td class="driving" title="{{stats.fairways}} / {{stats.totalFairways}}">{{fairwayText}}</td>\r\n<td class="driving">{{stats.fairwayPercent.toFixed(0)}}</td>\r\n<td class="driving">{{stats.drivePoints}}</td>\r\n<td class="driving" title="{{stats.playable}} / {{stats.totalFairways}}">{{playableText}}</td>\r\n<td class="driving">{{stats.playablePercent.toFixed(0)}}</td>\r\n\r\n<td class="scoreRow">{{stats.penalties}}</td>\r\n<td class="scoreRow">{{stats.extra}}</td>\r\n<td class="scoreRow">{{stats.eagles}}</td>\r\n<td class="scoreRow">{{stats.birdies}}</td>\r\n<td class="scoreRow">{{stats.pars}}</td>\r\n<td class="scoreRow">{{stats.bogies}}</td>\r\n<td class="scoreRow">{{stats.doubles}}</td>\r\n<td class="scoreRow">{{stats.others}} </td>\r\n\r\n'}),define("views/scoreTableItem",["text!templates/table.html"],function(e){var t=Backbone.View.extend({tagName:"tr",className:"",template:_.template(e),events:{},initialize:function(){this.model.on("change",this.render,this),this.model.on("destroy",this.remove,this)},render:function(){var e=$(this.el),t=this.template(this.model.toJSON());return e.html(t),e.addClass(this.model.get("className")),this}});return t}),define("models/sum",[],function(e,t){var n=Backbone.Model.extend({url:"scores",blank:{_id:"sum",isGoal:!0,date:new Date,courseName:"Sum",course:{name:""},tee:{name:""},score:0,stats:{handicap:0,GIR:0,putts:0,onePutts:0,threePutts:0,chipIn:0,shortGame:0,ch15:0,avgPuttsWithoutChip:0,avgPuttsWithChip:0,fairways:0,totalFairways:0,fairwayPercent:0,drivePoints:0,playable:0,playablePercent:0,chips:0,penalties:0,shortGamePercent:0,extra:0,scrambles:0,scrambleChances:0,scramblePercent:0,pars:0,bogies:0,birdies:0,extraChips:0,doubles:0,others:0,eagles:0}},initialize:function(){var e,t,n;e="Sum",t="Sum",n="goalFoot",this.set(this.blank),console.log("sum.isGoal",this.get("isGoal")),this.set({scrambleText:"",fairwayText:"",playableText:"",prettyDate:e,eagleAstrix:"",shortName:t,className:n})},count:0,add:function(e){this.sum("score",e);for(var t in this.blank.stats)this.sumStat(t,e);this.count++},roundNumbers:function(){for(var e in this.blank.stats)this.fixIt(e)},sum:function(e,t){var n=this.get(e);n=n*this.count+t.get(e),n/=this.count+1;var r={};r[e]=n,this.set(r)},sumStat:function(e,t){var n=this.get("stats"),r=n[e]*this.count+t.get("stats")[e];n[e]=r/(this.count+1),this.set({stats:n})},fixIt:function(e){var t=this.get("stats"),n=t[e],r;switch(e){case"handicap":case"putts":case"chipIn":case"avgPuttsWithoutChip":case"avgPuttsWithChip":case"extraChips":case"eagles":r=100;break;default:r=10}t[e]=Math.round(n*r)/r,this.set({stats:t})}});return n}),define("views/recentTable",["views/scoreTableItem","models/score","models/sum"],function(e,t,n){var r=Backbone.View.extend({el:"#recentTable",events:{},initialize:function(){},render:function(){console.log("rendering: score table view");var r=this;r.$el.empty();var i=new n;this.collection.last20().forEach(function(t){i.add(t);var n=new e({model:t});r.$el.append(n.render().el)}),i.roundNumbers();var s=new e({model:i});r.$el.append(s.render().el);var o=new e({model:new t(r.goalScore)});return r.$el.append(o.render().el),this.colorCells(),this},colorCells:function(){for(var e=3;e<=31;e++)switch(e){case 5:case 7:case 11:case 15:case 20:case 23:case 26:case 27:case 28:this.doAverages(e,!0);break;case 14:case 19:case 22:case 29:break;default:this.doAverages(e,!1)}},doAverages:function(e,t){var n=this.$el.find("tr:last-child").find(":nth-child("+e+")").html(),r=parseFloat(n);this.$el.find("td:nth-child("+e+")").each(function(){if($(this).parent().hasClass("goalFoot"))return;var e=parseFloat($(this).html()),n;e>r?n=!0:n=!1,(e==r||t&&n||!t&&!n)&&$(this).css("color","#002900").css("font-weight","800").css("background-color","#2fddff")})},goalScore:{_id:"goal",isGoal:!0,date:new Date,dateString:"*",courseName:"Goal",course:{name:""},tee:{name:""},score:86,stats:{handicap:13,GIR:7,putts:33,onePutts:5,threePutts:1,chipIn:1,shortGame:42,ch15:0,avgPuttsWithoutChip:2,avgPuttsWithChip:1.6,fairways:8,totalFairways:14,fairwayPercent:57,drivePoints:4,playable:12,playablePercent:85.7,chips:10,penalties:0,shortGamePercent:50,extra:2.5,scrambles:4,scrambleChances:10,scramblePercent:25,pars:9,bogies:7,birdies:1,extraChips:0,doubles:2,others:0,eagles:1}}});return r}),define("models/goal",[],function(){var e=Backbone.Model.extend({url:"goals",initialize:function(){}});return e}),define("collections/goallist",["models/goal"],function(e){var t=Backbone.Collection.extend({model:e,url:"goals"});return t}),define("text!templates/goal.html",[],function(){return'<td>{{index}}</td>\n<td class="text">{{id}}</td>\n<td>{{lastYear}}</td>\n<td>{{thisYear}}</td>\n<td>{{yearDiff}}</td>\n<td>{{goal}}</td>\n<td>{{goalDiff}}</td>'}),define("views/goal",["text!templates/goal.html"],function(e){var t=Backbone.View.extend({tagName:"tr",template:_.template(e),events:{},initialize:function(){this.model.on("change",this.render,this),this.model.on("destroy",this.remove,this)},render:function(){var e=$(this.el),t=this.template(this.model.toJSON());return e.html(t),this}});return t}),define("views/goals",["views/goal"],function(e){var t=Backbone.View.extend({el:"#goallist",tagName:"tbody",events:{},initialize:function(){},render:function(){var t=this;return t.$el.empty(),this.collection.forEach(function(n){console.log("goal calling render:",n);var r=new e({model:n});t.$el.append(r.render().el)}),this}});return t}),define("config",[],function(){var e={};return _.templateSettings={interpolate:/\{\{(.+?)\}\}/g},e}),define("app",["views/app","collections/scorelist","views/recent","views/recentTable","collections/goallist","views/goals","config"],function(e,t,n,r,i,s,o){var u=function(){console.log("app loaded"),this.views.app=new e,this.views.app.render(),this.collections.scores=new t,this.collections.goals=new i,this.views.recentTable=new r({collection:this.collections.scores}),this.views.goals=new s({collection:this.collections.goals}),console.log("render!"),this.init()};return u.prototype={views:{},collections:{},init:function(){var e=this;e.collections.scores.fetch({data:{},success:function(t){e.views.recentTable.render()}}),e.collections.goals.fetch({data:{},success:function(t){e.views.goals.render()}})}},u}),requirejs.config({baseUrl:"app/js",paths:{text:"lib/text",xdate:"/public/xdate/xdate",scoreCalculator:"lib/scoreCalculator"},shim:{"/public/underscore/underscore-min.js":{exports:"_"},"/public/backbone/backbone-min.js":{deps:["/public/underscore/underscore-min.js"],exports:"Backbone"},app:{deps:["/public/underscore/underscore-min.js","/public/backbone/backbone-min.js"]}}}),require(["app"],function(e){_.templateSettings={interpolate:/\{\{(.+?)\}\}/g},window.Golf=new e}),define("main",function(){});