{% extends 'layout.html' %}
{% import 'form.html' as form %}
{% block content %}
    <form id="saveScore" name="saveScore" action="/score/save" method="POST" class="form-inline">
        <div class="span12">
            <label>Date</label>
            <input type="date" value="" name="date" id="date" />
            <label>Course</label>
            <select id="course" name="course">
                <option value="">--select course--</option>
                {% for course in courses %}
                    <option value="{{course._id}}">{{course.name}}</option>
                {% endfor %}
            </select>
            <span id="teeArea">
            <label>Tee</label>
            <select id="tee" name="tee"></select>
            </span>
        </div>
        <div class="span12">
            <label>Score</label>
            <input class="input-mini uneditable-input" type="text" value="{{score}}" />
            <label>ESC</label>
            <input class="input-mini uneditable-input" type="text" value="{{ESC}}" />
            <label>Putts</label>
            <input class="input-mini uneditable-input" type="text" value="{{putts}}" />
            <label>GIR</label>
            <input class="input-mini uneditable-input" type="text" value="{{GIR}}" />
            <label>Fairways</label>
            <input class="input-mini uneditable-input" type="text" value="{{fairways}}" />
        </div>
        <div class="span12 form-horizontal">
        <div class="row-fluid">
        <div class="span12  text-center">
            <h2>Hole 1</h2>
            <button class="btn btn-mini">Next</button>
            <button class="btn btn-mini">Previous</button>
        </div>
        </div>
        <div class="row-fluid  hero-unit">
        <div class="span4">
            {{ form.controlGroup('Score','holescore','score','') }}
            {{ form.controlGroup('Putts','holeputts','putts','') }}
            {{ form.controlGroup('Chips','holechips','chips','') }}
            {{ form.controlGroup('Penalties','holepenalties','pentalies','') }}
         </div>
         <div class="span4">
            {{ form.controlGroup('Fairway','holescore','fairway','') }}
            {{ form.controlGroup('Playable','holescore','playable','') }}
            {{ form.controlGroup('Tee Club','holescore','club','') }}
            {{ form.controlGroup('Drive Points','holedrivepoints','drive points','') }}
         </div>
         <div class="span4">
            {{ form.controlGroup('Approach Distance','holescore','distance','') }}
            {{ form.controlGroup('Approach Club','holescore','club','') }}
            {{ form.controlGroup('Approach Result Distance','holescore','Short?','') }}
            {{ form.controlGroup('Approach Result Direction','holedrivepoints','Left?','') }}
         </div>
         </div>
         <div class="row-fluid">
            <div class="span12  text-center">
                <button class="btn btn-mini">Next</button>
                <button class="btn btn-mini">Previous</button>
            </div>
        </div>
        </div>
    </form>
{% endblock %}

{% block bottomJavascript %}
<!-- Placed at the end of the document so the pages load faster -->
<script type="text/javascript">
$(document).ready(function(){
    $("form#saveScore span#teeArea").hide();
    $("form#saveScore").on("change","select#course",function(){
        var courseId = $(this).find(":selected").val();
        if(courseId > ""){
            console.log(courseId);
            $.post('/course/tees',{"id": courseId},function(result){
                var courseList = $("form#saveScore select#tee");
                courseList.children().remove();
                courseList.append("<option value=''>-- select --</option>");
                result.tees.forEach(function(tee){
                    courseList.append("<option value='" + tee._id + "'>" + tee.name+ "</option>");
                });
                
                
                $("form#saveScore span#teeArea").show();     
            });
        }else{
            $("form#saveScore span#teeArea").hide(); 
        }
    });
});
        
</script>
{% endblock %}
