/**
 * @license RequireJS text 2.0.3 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/text for details
 */

define("text",["module"],function(e){var t,n,r=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],i=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,s=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,o=typeof location!="undefined"&&location.href,u=o&&location.protocol&&location.protocol.replace(/\:/,""),a=o&&location.hostname,f=o&&(location.port||undefined),l=[],c=e.config&&e.config()||{};t={version:"2.0.3",strip:function(e){if(e){e=e.replace(i,"");var t=e.match(s);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:c.createXhr||function(){var e,t,n;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;if(typeof ActiveXObject!="undefined")for(t=0;t<3;t+=1){n=r[t];try{e=new ActiveXObject(n)}catch(i){}if(e){r=[n];break}}return e},parseName:function(e){var t=!1,n=e.indexOf("."),r=e.substring(0,n),i=e.substring(n+1,e.length);return n=i.indexOf("!"),n!==-1&&(t=i.substring(n+1,i.length),t=t==="strip",i=i.substring(0,n)),{moduleName:r,ext:i,strip:t}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,r,i){var s,o,u,a=t.xdRegExp.exec(e);return a?(s=a[2],o=a[3],o=o.split(":"),u=o[1],o=o[0],(!s||s===n)&&(!o||o.toLowerCase()===r.toLowerCase())&&(!u&&!o||u===i)):!0},finishLoad:function(e,n,r,i){r=n?t.strip(r):r,c.isBuild&&(l[e]=r),i(r)},load:function(e,n,r,i){if(i.isBuild&&!i.inlineText){r();return}c.isBuild=i.isBuild;var s=t.parseName(e),l=s.moduleName+"."+s.ext,h=n.toUrl(l),p=c.useXhr||t.useXhr;!o||p(h,u,a,f)?t.get(h,function(n){t.finishLoad(e,s.strip,n,r)},function(e){r.error&&r.error(e)}):n([l],function(e){t.finishLoad(s.moduleName+"."+s.ext,s.strip,e,r)})},write:function(e,n,r,i){if(l.hasOwnProperty(n)){var s=t.jsEscape(l[n]);r.asModule(e+"!"+n,"define(function () { return '"+s+"';});\n")}},writeFile:function(e,n,r,i,s){var o=t.parseName(n),u=o.moduleName+"."+o.ext,a=r.toUrl(o.moduleName+"."+o.ext)+".js";t.load(u,r,function(n){var r=function(e){return i(a,e)};r.asModule=function(e,t){return i.asModule(e,a,t)},t.write(e,u,r,s)},s)}};if(c.env==="node"||!c.env&&typeof process!="undefined"&&process.versions&&!!process.versions.node)n=require.nodeRequire("fs"),t.get=function(e,t){var r=n.readFileSync(e,"utf8");r.indexOf("ï»¿")===0&&(r=r.substring(1)),t(r)};else if(c.env==="xhr"||!c.env&&t.createXhr())t.get=function(e,n,r){var i=t.createXhr();i.open("GET",e,!0),c.onXhr&&c.onXhr(i,e),i.onreadystatechange=function(t){var s,o;i.readyState===4&&(s=i.status,s>399&&s<600?(o=new Error(e+" HTTP status: "+s),o.xhr=i,r(o)):n(i.responseText))},i.send(null)};else if(c.env==="rhino"||!c.env&&typeof Packages!="undefined"&&typeof java!="undefined")t.get=function(e,t){var n,r,i="utf-8",s=new java.io.File(e),o=java.lang.System.getProperty("line.separator"),u=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(s),i)),a="";try{n=new java.lang.StringBuffer,r=u.readLine(),r&&r.length()&&r.charAt(0)===65279&&(r=r.substring(1)),n.append(r);while((r=u.readLine())!==null)n.append(o),n.append(r);a=String(n.toString())}finally{u.close()}t(a)};return t}),define("text!templates/app.html",[],function(){return'\r\n<div class="span4">\r\n  <h2>Goals By Year</h2>\r\n  <table cellpadding="0" cellspacing="0" class="table table-bordered table-striped table-hover scores">\r\n    <thead><tr><th colspan="2">Goal</th><th>Last Year</th><th>This Year</th><th>Year Diff</th><th>Goal</th><th>Goal Diff</th></tr></thead>\r\n    <tbody id="goallist"></tbody>\r\n  </table>\r\n</div>\r\n\r\n<div class="span4">\r\n  <h2>Handicap</h2>\r\n  <table cellpadding="0" cellspacing="0" class="table table-bordered table-striped table-hover scores"></table>\r\n</div>\r\n<div id="courseLayer" class="span12 row-fluid">\r\n    <div class="span3">\r\n        <h2>Course List</h2>\r\n        <ul id="courselist" class="courselist unstyled"></ul>\r\n    </div>\r\n    <div class="span9">\r\n        <div class="tabbable">\r\n        <ul class="nav nav-pills">\r\n            <li class="active"><a href="#tab1" data-toggle="tab">Hole by Hole</a></li>\r\n            <li><a href="#tab2" data-toggle="tab">Handicap Predictor</a></li>\r\n        </ul>\r\n        <div class="tab-content">\r\n            <div class="tab-pane active" id="tab1">\r\n                 <div id="courseStats"></div>   \r\n            </div>\r\n            <div class="tab-pane" id="tab2">\r\n            </div>\r\n        </div>\r\n        </div>\r\n    </div>\r\n    \r\n</div>\r\n<div class="span12">\r\n<h2>Recent Scores\r\n    <button class="btn btn-mini" type="button" data-toggle="modal" data-target="#bookModal"><span class="icon-plus-sign"></span></button>\r\n</h2>\r\n<table cellpadding="0" cellspacing="0" class="table table-bordered table-striped table-hover scores">\r\n            <thead>\r\n    <tr>\r\n        <th rowspan="2">Date</th>\r\n        <th rowspan="2">Course</th>\r\n        <th rowspan="2">Score</th>\r\n        <th rowspan="2">Handicap</th>\r\n        <th rowspan="2">GIR</th>\r\n        <th colspan="3">Putts</th>\r\n        <th  class="shortGame" colspan="2">Avg Putts</th>\r\n        <th class="shortGame" colspan="3">Chips</th>\r\n        <th class="shortGame" colspan="2">Scramble</th>\r\n        <th class="shortGame" colspan="2">Short Game</th>\r\n        \r\n        <th rowspan="2">Ch 15</th>\r\n        \r\n        \r\n        <th colspan="2" class="driving">Fairways</th>\r\n        <th rowspan="2" class="driving" title="Driver Penalty Points">Dr Pen Pts</th>\r\n        <th colspan="2" class="driving">Playable</th>\r\n        <th class="scoreRow" rowspan="2" title="Penalties">Pens</th>\r\n        <th class="scoreRow" rowspan="2" title="Extras">EX</th>\r\n        <th class="scoreRow" rowspan="2" title="Eagles">-2</th>\r\n        <th class="scoreRow" rowspan="2" title="Birdies">-1</th>\r\n        <th class="scoreRow" rowspan="2" title="Pars">0</th>\r\n        <th class="scoreRow" rowspan="2" title="Bogies">+1</th>\r\n        <th class="scoreRow" rowspan="2" title="Doubles">+2</th>\r\n        <th class="scoreRow" rowspan="2" title="Others">+3</th>\r\n        \r\n    </tr>\r\n    <tr>\r\n        <th>#</th><!--putts -->\r\n        <th>1</th><!--putts -->\r\n        <th>3</th><!--putts -->\r\n        <th class="shortGame">w/ Chip</th><!--avgputts -->\r\n        <th class="shortGame">w/o Chip</th><!--avgputts -->\r\n        <th class="shortGame">In</th><!--chips -->\r\n        <th class="shortGame">#</th><!--chips -->\r\n        <th class="shortGame" title="More then one chip on a hole">EX</th><!--chips -->\r\n        <th class="shortGame">#</th><!--scramble -->\r\n        <th class="shortGame">%</th><!--scramble -->\r\n        \r\n        <th class="shortGame">#</th><!--shortgame -->\r\n        <th class="shortGame">%</th><!--shortgame -->\r\n\r\n        <th class="driving">#</th><!--fairways -->\r\n        <th class="driving">%</th><!--fairways -->\r\n        <th class="driving">#</th><!--playable -->\r\n        <th class="driving">%</td><!--playable -->\r\n        \r\n    </tr>\r\n	</thead>\r\n        <tbody id="recentTable">\r\n        </tbody>\r\n    </table>\r\n</div>'}),define("views/app",["text!templates/app.html"],function(e){var t=Backbone.View.extend({id:"main",tagName:"div",className:"container-fluid",el:"#score-app",template:_.template(e),events:{},initialize:function(){},render:function(){return this.$el.html(this.template()),this}});return t});var XDate=function(e,t,n,r){function T(){return N(this instanceof T?this:new T,arguments)}function N(t,n){var r=n.length,i;nt(n[r-1])&&(i=n[--r],n=Y(n,0,r));if(!r)t[0]=new e;else if(r==1){var s=n[0];s instanceof e||tt(s)?t[0]=new e(+s):s instanceof T?t[0]=W(s):et(s)&&(t[0]=new e(0),t=H(s,i||!1,t))}else t[0]=new e(E.apply(e,n)),i||(t[0]=J(t[0]));return nt(i)&&k(t,i),t}function C(e){return e[0].toString===S}function k(t,n,r){return n?C(t)||(r&&(t[0]=$(t[0])),t[0].toString=S):C(t)&&(r?t[0]=J(t[0]):t[0]=new e(+t[0])),t}function L(e,t,n,r,u){var a=G(X,e[0],u),f=G(V,e[0],u),l=t==s?n%12:a(s),c=!1;r.length==2&&nt(r[1])&&(c=r[1],r=[n]),f(t,r),c&&a(s)!=l&&(f(s,[a(s)-1]),f(o,[K(a(i),a(s))]))}function A(e,n,r,i){r=Number(r);var s=t.floor(r);e["set"+g[n]](e["get"+g[n]]()+s,i||!1),s!=r&&n<l&&A(e,n+1,(r-s)*b[n],i)}function O(e,n,r){e=e.clone().setUTCMode(!0,!0),n=T(n).setUTCMode(!0,!0);var u=0;if(r==i||r==s){for(var a=l,f;a>=r;a--)u/=b[a],u+=X(n,!1,a)-X(e,!1,a);r==s&&(u+=(n.getFullYear()-e.getFullYear())*12)}else if(r==o){var c=e.toDate().setUTCHours(0,0,0,0),h=n.toDate().setUTCHours(0,0,0,0);u=t.round((h-c)/d)+(n-h-(e-c))/d}else u=(n-e)/[36e5,6e4,1e3,1][r-3];return u}function M(e){return _(e(i),e(s),e(o))}function _(n,r,i){var s=new e(E(n,r,i)),o=D(n),u=o;if(s<o)u=D(n-1);else{var a=D(n+1);s>=a&&(u=a)}return t.floor(t.round((s-u)/d)/7)+1}function D(t){var n=new e(E(t,0,4));return n.setUTCDate(n.getUTCDate()-(n.getUTCDay()+6)%7),n}function P(e,t,n,s){var u=G(X,e,s),a=G(V,e,s),f=D(n===r?u(i):n);s||(f=J(f)),e.setTime(+f),a(o,[u(o)+(t-1)*7])}function H(t,n,r){var i=T.parsers,s=0,o;for(;s<i.length;s++){o=i[s](t,n,r);if(o)return o}return r[0]=new e(t),r}function B(t,n,r){var i=t.match(/^(\d{4})(-(\d{2})(-(\d{2})([T ](\d{2}):(\d{2})(:(\d{2})(\.(\d+))?)?(Z|(([-+])(\d{2})(:?(\d{2}))?))?)?)?)?$/);if(i){var s=new e(E(i[1],i[3]?i[3]-1:0,i[5]||1,i[7]||0,i[8]||0,i[10]||0,i[12]?Number("0."+i[12])*1e3:0));return i[13]?i[14]&&s.setUTCMinutes(s.getUTCMinutes()+(i[15]=="-"?1:-1)*(Number(i[16])*60+(i[18]?Number(i[18]):0))):n||(s=J(s)),r.setTime(+s)}}function j(e,t,n,r,i){function f(e){return n[e]||u[e]}function l(e){if(r){var t=(e==c?o:e)-1;for(;t>=0;t--)r.push(a(t))}return a(e)}var s=T.locales,u=s[T.defaultLocale]||{},a=G(X,e,i);return n=(et(n)?s[n]:n)||{},F(e,t,l,f,i)}function F(e,t,n,r,i){var s,o,u="";while(s=t.match(w))u+=t.substr(0,s.index),s[1]?u+=I(e,s[1],n,r,i):s[3]?(o=F(e,s[4],n,r,i),parseInt(o.replace(/\D/g,""),10)&&(u+=o)):u+=s[7]||"'",t=t.substr(s.index+s[0].length);return u+t}function I(e,t,n,i,s){var o=t.length,u,a="";while(o>0)u=q(e,t.substr(0,o),n,i,s),u!==r?(a+=u,t=t.substr(o),o=t.length):o--;return a+t}function q(e,t,n,r,h){var p=T.formatters[t];if(et(p))return F(e,p,n,r,h);if(rt(p))return p(e,h||!1,r);switch(t){case"fff":return it(n(l),3);case"s":return n(f);case"ss":return it(n(f));case"m":return n(a);case"mm":return it(n(a));case"h":return n(u)%12||12;case"hh":return it(n(u)%12||12);case"H":return n(u);case"HH":return it(n(u));case"d":return n(o);case"dd":return it(n(o));case"ddd":return r("dayNamesShort")[n(c)]||"";case"dddd":return r("dayNames")[n(c)]||"";case"M":return n(s)+1;case"MM":return it(n(s)+1);case"MMM":return r("monthNamesShort")[n(s)]||"";case"MMMM":return r("monthNames")[n(s)]||"";case"yy":return(n(i)+"").substring(2);case"yyyy":return n(i);case"t":return U(n,r).substr(0,1).toLowerCase();case"tt":return U(n,r).toLowerCase();case"T":return U(n,r).substr(0,1);case"TT":return U(n,r);case"z":case"zz":case"zzz":return h?"Z":R(e,t);case"w":return M(n);case"ww":return it(M(n));case"S":var d=n(o);if(d>10&&d<20)return"th";return["st","nd","rd"][d%10-1]||"th"}}function R(e,n){var r=e.getTimezoneOffset(),i=r<0?"+":"-",s=t.floor(t.abs(r)/60),o=t.abs(r)%60,u=s;return n=="zz"?u=it(s):n=="zzz"&&(u=it(s)+":"+it(o)),i+u}function U(e,t){return e(u)<12?t("amDesignator"):t("pmDesignator")}function z(e){return!isNaN(+e[0])}function W(t){var n=new e(+t[0]);return C(t)&&(n.toString=S),n}function X(e,t,n){return e["get"+(t?"UTC":"")+g[n]]()}function V(e,t,n,r){e["set"+(t?"UTC":"")+g[n]].apply(e,r)}function $(t){return new e(E(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()))}function J(t){return new e(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds())}function K(t,n){return 32-(new e(E(t,n,32))).getUTCDate()}function Q(e){return function(){return e.apply(r,[this].concat(Y(arguments)))}}function G(e){var t=Y(arguments,1);return function(){return e.apply(r,t.concat(Y(arguments)))}}function Y(e,t,i){return n.prototype.slice.call(e,t||0,i===r?e.length:i)}function Z(e,t){for(var n=0;n<e.length;n++)t(e[n],n)}function et(e){return typeof e=="string"}function tt(e){return typeof e=="number"}function nt(e){return typeof e=="boolean"}function rt(e){return typeof e=="function"}function it(e,t){t=t||2,e+="";while(e.length<t)e="0"+e;return e}var i=0,s=1,o=2,u=3,a=4,f=5,l=6,c=7,h=8,p=9,d=864e5,v="yyyy-MM-dd'T'HH:mm:ss(.fff)",m=v+"zzz",g=["FullYear","Month","Date","Hours","Minutes","Seconds","Milliseconds","Day","Year"],y=["Years","Months","Days"],b=[12,31,24,60,60,1e3,1],w=new RegExp("(([a-zA-Z])\\2*)|(\\((('.*?'|\\(.*?\\)|.)*?)\\))|('(.*?)')"),E=e.UTC,S=e.prototype.toUTCString,x=T.prototype;return x.length=1,x.splice=n.prototype.splice,x.getUTCMode=Q(C),x.setUTCMode=Q(k),x.getTimezoneOffset=function(){return C(this)?0:this[0].getTimezoneOffset()},Z(g,function(e,t){x["get"+e]=function(){return X(this[0],C(this),t)},t!=h&&(x["getUTC"+e]=function(){return X(this[0],!0,t)}),t!=c&&(x["set"+e]=function(e){return L(this,t,e,arguments,C(this)),this},t!=h&&(x["setUTC"+e]=function(e){return L(this,t,e,arguments,!0),this},x["add"+(y[t]||e)]=function(e,n){return A(this,t,e,n),this},x["diff"+(y[t]||e)]=function(e){return O(this,e,t)}))}),x.getWeek=function(){return M(G(X,this,!1))},x.getUTCWeek=function(){return M(G(X,this,!0))},x.setWeek=function(e,t){return P(this,e,t,!1),this},x.setUTCWeek=function(e,t){return P(this,e,t,!0),this},x.addWeeks=function(e){return this.addDays(Number(e)*7)},x.diffWeeks=function(e){return O(this,e,o)/7},T.parsers=[B],T.parse=function(e){return+T(""+e)},x.toString=function(e,t,n){return e===r||!z(this)?this[0].toString():j(this,e,t,n,C(this))},x.toUTCString=x.toGMTString=function(e,t,n){return e===r||!z(this)?this[0].toUTCString():j(this,e,t,n,!0)},x.toISOString=function(){return this.toUTCString(m)},T.defaultLocale="",T.locales={"":{monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],amDesignator:"AM",pmDesignator:"PM"}},T.formatters={i:v,u:m},Z(["getTime","valueOf","toDateString","toTimeString","toLocaleString","toLocaleDateString","toLocaleTimeString","toJSON"],function(e){x[e]=function(){return this[0][e]()}}),x.setTime=function(e){return this[0].setTime(e),this},x.valid=Q(z),x.clone=function(){return new T(this)},x.clearTime=function(){return this.setHours(0,0,0,0)},x.toDate=function(){return new e(+this[0])},T.now=function(){return+(new e)},T.today=function(){return(new T).clearTime()},T.UTC=E,T.getDaysInMonth=K,typeof module!="undefined"&&module.exports&&(module.exports=T),typeof define=="function"&&define.amd&&define("xdate",[],function(){return T}),T}(Date,Math,Array),ScoreCalculator=function(){function t(){return n(this instanceof t?this:new t,arguments)}function n(e,t){return e}var e=t.prototype;e.calc=function(e,t,n,r,s){if(r===null)throw"Course cannot be null";var o={onePutts:0,threePutts:0,chipIn:0,putts:0,handicap:0,birdies:0,eagles:0,pars:0,bogies:0,others:0,doubles:0};return o.handicap=u(e,t,s.rating,s.slope),o=i(o,n,s),o.shortGamePercent=Math.round(o.shortGame/e*1e3)/10,o.fairwayPercent=Math.round(o.fairways/o.totalFairways*1e3)/10,o.playablePercent=Math.round(o.playable/o.totalFairways*1e3)/10,o};var r=function(e,t,n){return e-2>=t-n};e.calculateHole=function(e,t){var n={};if(t===undefined)throw"error par is required parameter";return n.hasFairway=t>3,n.hasFairway&&(n.fairwayHit=/[Hh]it/.test(e.fairway)),n.GIR=r(t,e.score,e.putts),n.overPar=e.score-t,n};var i=function(e,t,n){e.GIR=0,e.ch15=0,e.chips=0,e.extraChips=0,e.eagles=0,e.totalFairways=0,e.fairways=0,e.playable=0,e.drivePoints=0,e.penalties=0,e.holesWChip=0,e.holesNoChip=0,e.puttsAfterChip=0,e.puttsAfterNoChip=0,e.scrambleChances=0,e.scrambles=0,e.extra=0;for(var r=0;r<t.length;r++){var i=o(t[r],n.holes[r]);e.putts+=i.putts,i.GIR&&e.GIR++,i.Ch15&&e.ch15++,e.chips+=i.chips,i.chips>1&&(i.extraChips=i.chips-1,e.extraChips+=i.extraChips),e.penalties+=i.penalties,e.extra+=i.extra,i.par==i.score?e.pars++:i.par+1==i.score?e.bogies++:i.par+2==i.score?e.doubles++:i.par+2<i.score?e.others++:i.par-2>=i.score?e.eagles++:e.birdies++,i.par>3&&(e.totalFairways++,/[Hh]it/.test(i.fairway)&&e.fairways++,i.drivePoints&&(e.drivePoints+=i.drivePoints),i.playable&&e.playable++),i.putts==0?e.chipIn++:i.putts==1?e.onePutts++:i.putts==3&&e.threePutts++,i.chips>0?(e.holesWChip++,e.puttsAfterChip+=i.putts):(e.holesNoChip++,e.puttsAfterNoChip+=i.putts),i.scramble!=null&&e.scrambleChances++,i.scramble&&e.scrambles++}return e.shortGame=e.chips+e.putts,e.scrambleChances>0?e.scramblePercent=Math.round(e.scrambles/e.scrambleChances*100):e.scramblePercnet="N/A",e.holesWChip>0&&(e.avgPuttsWithChip=e.puttsAfterChip/e.holesWChip),e.holesNoChip<18&&(e.avgPuttsWithoutChip=(e.putts-e.puttsAfterChip)/(18-e.holesWChip)),e.avgPuttsWithChip=Math.round(e.avgPuttsWithChip*10)/10,e.avgPuttsWithoutChip=Math.round(e.avgPuttsWithoutChip*10)/10,e.puttsPerHole=Math.round(e.putts/18*10)/10,e},s=e.getExtra=function(e,t){return e.score-(e.chips+e.putts)-(t-2)},o=function(e,t){var n=e;return n.GIR=!1,e.putts&&t.par&&e.score&&(n.GIR=r(t.par,e.score,e.putts)),n.Ch15=n.GIR&&n.putts>2,n.shortGame=n.chips+n.putts,e.penalties?n.penalties=e.penalties:n.penalties=0,n.extra=s(n,t.par),n.par=t.par,n.yards=t.yards,n.fairway=e.fairway,n.chips&&n.chips>0?n.scramble=n.chips==1&&n.putts<=1:n.scramble=null,e.penalties?n.penalties=e.penalties:n.penalties=0,e.playable?n.playable=!0:n.playable=!1,n},u=function(e,t,n,r){var i;return t&&t<e?i=t:i=e,Math.round((i-n)/r*113*100)/100};return typeof module!="undefined"&&module.exports&&(module.exports=t),typeof define=="function"&&define.amd&&define("scoreCalculator",[],function(){return t}),t}();define("models/score",["xdate","scoreCalculator"],function(e,t){var n=Backbone.Model.extend({url:"scores",initialize:function(){var t,n,r,i;this.get("isGoal")?(t="Gaol",n="Goal",r="goalFoot"):(r="",t=(new e(this.get("date"),!0)).toString("yyyy-MM-dd"),n=this.get("course")._id.substring(0,10)+'<span class="slash">-</span>'+this.get("tee").name.substring(0,10));var s=this.get("stats");i=s.scrambles+"/"+s.scrambleChances;var o=s.fairways+"/"+s.totalFairways,u=s.playable+"/"+s.totalFairways,a=this.get("eagles"),f=a&&a>0?"*":"";this.set({scrambleText:i,fairwayText:o,playableText:u,prettyDate:t,eagleAstrix:f,shortName:n,className:r})}});return n}),define("collections/scorelist",["models/score"],function(e){var t=Backbone.Collection.extend({model:e,url:"scores",last20:function(){var e=this.sortBy(function(e){return e.get("prettyDate")}).reverse();return e.length>20&&(e=e.slice(0,20)),e}});return t}),define("text!templates/score.html",[],function(){return'\r\n<div class="scoreDate span1">{{prettyDate}}</div>\r\n<div class="course span4">{{course.name}}<br />\r\n<span class="tee">{{tee.name}}</div>\r\n<div class="score span1">{{score}}<br />\r\n<span class="tee">{{stats.handicap}}<br />\r\n<span class="tee">{{stats.overPar}}</div>\r\n<div class="span2">\r\n<dl>\r\n    <dd>Birdies</dd>\r\n    <dt>{{stats.birdies+stats.eagles}}{{eagleAstrix}}</dt>\r\n</dl>\r\n<dl>\r\n    <dd>Pars</dd>\r\n    <dt>{{stats.pars}}</dt>\r\n</dl>\r\n<dl>\r\n    <dd>Bogies</dd>\r\n    <dt>{{stats.bogies}}</dt>\r\n</dl>\r\n<dl>\r\n    <dd>Doubles</dd>\r\n    <dt>{{stats.doubles}}</dt>\r\n</dl>\r\n<dl>\r\n    <dd>Others</dd>\r\n    <dt>{{stats.others}}</dt>\r\n</dl>\r\n</div>\r\n<div class="span2">\r\n<dl>\r\n    <dd>Putts</dd>\r\n    <dt>{{stats.putts}}</dt>\r\n</dl>\r\n<dl>\r\n    <dd>1 putts</dd>\r\n    <dt>{{stats.onePutts}}</dt>\r\n</dl>\r\n<dl>\r\n    <dd>3 putts</dd>\r\n    <dt>{{stats.threePutts}}</dt>\r\n</dl>\r\n<dl>\r\n    <dd>Ch15</dd>\r\n    <dt>{{stats.ch15}}</dt>\r\n</dl>\r\n<dl>\r\n    <dd>/ Hole</dd>\r\n    <dt>{{stats.puttsPerHole}}</dt>\r\n</dl>\r\n</div>\r\n<div class="span2">\r\n<dl>\r\n    <dd>Chips</dd>\r\n    <dt>{{stats.chips}}</dt>\r\n</dl>\r\n<dl>\r\n    <dd>Chip In</dd>\r\n    <dt>{{stats.chipIn}}</dt>\r\n</dl>\r\n<dl>\r\n    <dd>Extra Chips</dd>\r\n    <dt>{{stats.extraChips}}</dt>\r\n</dl>\r\n<dl>\r\n    <dd>Scrambles</dd>\r\n</dl>\r\n<dl>\r\n<dd>{{stats.scrambles}} of {{stats.scrambleChances}}</dd>\r\n</dl>\r\n<dl>\r\n    <dd>Scramble %</dd>\r\n    <dt>{{stats.scramblePercent}}</dt>\r\n</dl>\r\n\r\n</div>\r\n<div class="span2">\r\n<dl>\r\n    <dd>GIR</dd>\r\n    <dt>{{stats.GIR}}</dt>\r\n</dl>\r\n<dl>\r\n    <dd>Short Game</dd>\r\n    <dt>{{stats.shortGame}}</dt>\r\n</dl>\r\n<dl>\r\n    <dd>Putts w/ Chip</dd>\r\n    <dt>{{stats.avgPuttsWithChip}}</dt>\r\n</dl>\r\n<dl>\r\n    <dd>Putts w/ Chip</dd>\r\n    <dt>{{stats.avgPuttsWithoutChip}}</dt>\r\n</dl>\r\n<dl>\r\n    <dd>Short Game %</dd>\r\n    <dt>{{stats.shoreGamePercent}}</dt>\r\n</dl>\r\n<dl>\r\n    <dd>Fairways</dd>\r\n</dl>\r\n<dl>\r\n    <dt>{{stats.fairways}} of {{stats.totalFairways}}</dt>\r\n</dl>\r\n</div>\r\n'}),define("views/score",["text!templates/score.html"],function(e){var t=Backbone.View.extend({tagName:"div",className:"card row-fluid",template:_.template(e),events:{},initialize:function(){this.model.on("change",this.render,this),this.model.on("destroy",this.remove,this)},render:function(){var e=$(this.el),t=this.template(this.model.toJSON());return e.html(t),this}});return t}),define("views/recent",["views/score"],function(e){var t=Backbone.View.extend({el:"#recentScores",tagName:"div",events:{},initialize:function(){this.collection.on("add",this.render,this)},render:function(){var t=this;return t.$el.empty(),this.collection.last20().forEach(function(n){var r=new e({model:n});t.$el.append(r.render().el)}),this}});return t}),define("text!templates/table.html",[],function(){return'<td class="text"><a href="" id="{{_id}}" class="scorelink">{{prettyDate}}</a></td>\r\n<td class="text courseName" title="{{course.name}} - {{tee.name}}">{{shortName}}</td>\r\n<td>{{score}}</td>\r\n<td>{{stats.handicap.toFixed(2)}}</td>\r\n<td>{{stats.GIR}}</td>\r\n<td>{{stats.putts}}</td><td>{{stats.onePutts}}</td><td>{{stats.threePutts}}</td>\r\n<td class="shortGame">{{stats.avgPuttsWithChip.toFixed(2)}}</td>\r\n<td class="shortGame">{{stats.avgPuttsWithoutChip.toFixed(2)}}</td>\r\n<td class="shortGame">{{stats.chipIn}}</td>\r\n<td class="shortGame">{{stats.chips}}</td>\r\n<td class="shortGame">{{stats.extraChips}} </td>\r\n<td class="shortGame" title="{{stats.scrambles}} / {{stats.scrambleChances}}">{{scrambleText}}</td>\r\n<td class="shortGame">{{stats.scramblePercent.toFixed(0)}}</td>\r\n\r\n<td class="shortGame">{{stats.shortGame}}</td>\r\n<td class="shortGame">{{stats.shortGamePercent.toFixed(0)}}</td>\r\n\r\n<td>{{stats.ch15}}</td>\r\n<!-- driving -->\r\n<td class="driving" title="{{stats.fairways}} / {{stats.totalFairways}}">{{fairwayText}}</td>\r\n<td class="driving">{{stats.fairwayPercent.toFixed(0)}}</td>\r\n<td class="driving">{{stats.drivePoints}}</td>\r\n<td class="driving" title="{{stats.playable}} / {{stats.totalFairways}}">{{playableText}}</td>\r\n<td class="driving">{{stats.playablePercent.toFixed(0)}}</td>\r\n\r\n<td class="scoreRow">{{stats.penalties}}</td>\r\n<td class="scoreRow">{{stats.extra}}</td>\r\n<td class="scoreRow">{{stats.eagles}}</td>\r\n<td class="scoreRow">{{stats.birdies}}</td>\r\n<td class="scoreRow">{{stats.pars}}</td>\r\n<td class="scoreRow">{{stats.bogies}}</td>\r\n<td class="scoreRow">{{stats.doubles}}</td>\r\n<td class="scoreRow">{{stats.others}} </td>\r\n\r\n'}),define("text!templates/scorecard.html",[],function(){return'<div class="modal-header">\r\n    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\r\n    <h3>{{prettyDate}} - {{course.name}} - {{tee.name}}</h3>\r\n  </div>\r\n  <div class="modal-body">\r\n    <table class="scores scoreFront scorecard table table-bordered">\r\n        <thead>\r\n            <tr>\r\n                <th>Hole</th>\r\n                <th>1</th>\r\n                <th>2</th>\r\n                <th>3</th>\r\n                <th>4</th>\r\n                <th>5</th>\r\n                <th>6</th>\r\n                <th>7</th>\r\n                <th>8</th>\r\n                <th>9</th>\r\n                <th>Out</th>\r\n                <th>Total</th>\r\n            </tr>\r\n        </thead>\r\n        {{frontTable}}\r\n    </table>\r\n     <table class="scores scorecard scoreBack table table-bordered">\r\n        <thead>\r\n            <tr>\r\n                <th>Hole</th>\r\n                <th>10</th>\r\n                <th>11</th>\r\n                <th>12</th>\r\n                <th>13</th>\r\n                <th>14</th>\r\n                <th>15</th>\r\n                <th>16</th>\r\n                <th>17</th>\r\n                <th>18</th>\r\n                <th>In</th>\r\n                <th>Total</th>\r\n            </tr>\r\n        </thead>\r\n        <tbody>\r\n            {{backTable}}\r\n        </tbody>\r\n    </table>\r\n  </div>\r\n  <div class="modal-footer">\r\n  <a href="#" class="btn btn-primary" id="btnFront">Front</a><a href="#" class="btn" id="btnBack">Back</a><a href="#" class="btn" id="btnStats" >Stats</a>\r\n    <a href="#" class="btn" data-dismiss="modal">Close</a>\r\n    <a href="/book/all" class="btn">Not sure</a>\r\n  </div>'}),define("views/scorecard",["text!templates/scorecard.html","scoreCalculator"],function(e,t){function r(e){switch(e){case-3:case-2:return"eagle";case-1:return"birdie";case 0:return"par";case 1:return"bogie";case 2:return"double";default:return"other"}}var n=Backbone.View.extend({el:"#scoreModal",tagName:"div",template:_.template(e),events:{"click #btnBack":"showBackTable","click #btnFront":"showFrontTable"},initialize:function(){this.model.set({frontTable:this.getFrontTable(),backTable:this.getBackTable()}),this.render()},render:function(){var e=$('<div id="scoreModal" class="modal hide fade scorecard" tabindex="-1" role="dialog" aria-hidden="true"/>'),t=this.template(this.model.toJSON());return e.html(t),$("body").append(e),e.modal("show"),e.find(".scoreBack").hide(),this.$el=e,this},showFrontTable:function(){this.$el.find(".scoreFront").show(),this.$el.find("#btnFront").addClass("btn-primary"),this.$el.find("#btnBack").removeClass("btn-primary"),this.$el.find(".scoreBack").hide()},showBackTable:function(){this.$el.find(".scoreBack").show(),this.$el.find(".scoreFront").hide(),this.$el.find("#btnBack").addClass("btn-primary"),this.$el.find("#btnFront").removeClass("btn-primary")},getFrontTable:function(){return this.getTable(0)},getBackTable:function(){return this.getTable(9)},getTable:function(e){var t=this.model.get("tee"),n=this.model.get("holes"),r="<tbody>";return r+=this.getRow(t.holes,e,"Yards","yards",t.yards),r+=this.getRow(t.holes,e,"Par","par",t.par),r+=this.getScoreRow(n,t.holes,e,"Score","score",this.model.get("score")),r+=this.getRow(n,e,"Putts","putts",this.model.get("stats").putts),r+=this.getBoolRow(n,t.holes,e,"GIR","GIR",this.model.get("stats").GIR),r+=this.getRow(n,e,"Chips","chips",this.model.get("stats").chips),r+=this.getFairwayRow(n,e,"Fairway","fairway",this.model.get("stats").fairwayPercent,function(e){return e=="Hit"||e=="hit"}),r+=this.getFairwayRow(n,e,"Playable","playable",this.model.get("stats").playablePercent,function(e){return e}),r+=this.getExtraRow(n,t.holes,e,"Extras",this.model.get("stats").extra),r+=this.getRow(n,e,"Penalties","penalties",this.model.get("stats").penalties),r+=this.getRow(n,e,"Dr Pnts","drivePoints",this.model.get("stats").drivePoints),r+="</tbody>",r},getRow:function(e,t,n,r,i){var s="<tr>";s+="<th>"+n+"</th>";var o=0;for(var u=0;u<9;u++){var a=e[t+u][r];typeof a!="undefined"?(o+=a,s+="<td>"+a+"</td>"):s+="<td>0</td>"}return s+="<td>"+o+"</td>",s+="<td>"+i+"</td>",s+="</tr>",s},getExtraRow:function(e,n,r,i,s){var o="<tr>";o+="<th>"+i+"</th>";var u=0;for(var a=0;a<9;a++){var f=e[r+a],l=n[r+a],c=(new t).getExtra(f,l.par);console.log("getExtraRow:",c),typeof c!="undefined"?(u+=c,o+="<td>"+c+"</td>"):o+="<td>0</td>"}return o+="<td>"+u+"</td>",o+="<td>"+s+"</td>",o+="</tr>",o},getScoreRow:function(e,t,n,i,s,o){var u="<tr>";u+="<th>"+i+"</th>";var a=0;for(var f=0;f<9;f++){var l=e[n+f][s];if(typeof l!="undefined"){a+=l;var c=l-t[n+f].par,h=r(c);u+="<td class='"+h+"'>"+l+"</td>"}else u+="<td class='bogie'>0</td>"}return u+="<td class='bogie'>"+a+"</td>",u+="<td class='bogie'>"+o+"</td>",u+="</tr>",u},getBoolRow:function(e,t,n,r,i,s){var o="<tr><th>"+r+"</th>",u=0;for(var a=0;a<9;a++){var f=e[n+a],l=t[n+a].par-2>=f.score-f.putts;console.log("bool row:",n+a,l),l?(u+=1,o+="<td><i class='icon icon-ok' /></td>"):o+="<td><i class='icon icon-remove' /></td>"}return o+="<td>"+u+"</td><td>"+s+"</td></tr>",o},getFairwayRow:function(e,t,n,r,i,s){var o="<tr>";o+="<th>"+n+"</th>";var u=0,a=0;for(var f=0;f<9;f++){var l=e[t+f][r];typeof l!="undefined"?(a+=1,s(l)?(u+=1,o+="<td><i class='icon icon-ok' /></td>"):o+="<td><i class='icon icon-remove' /></td>"):o+="<td>&nbsp;</td>"}return o+="<td>"+(u/a*100).toFixed(0)+"</td>",o+="<td>"+i+"</td>",o+="</tr>",o}});return n}),define("models/scorecard",[],function(){var e=Backbone.Model.extend({initialize:function(){var e={par:0},t={par:0};for(var n=0;n<9;n++){var r=this.get("tee").holes[n];e.par+=r.par}for(var i=9;i<18;i++){var s=this.get("tee").holes[i];t.par+=s.par}var o=this.get("tee");o.par=0,o.yards=0,this.get("tee").holes.forEach(function(e){o.par+=e.par,o.yards+=e.yards}),this.set({tee:o,front:e,back:t}),console.log("scorecard init",this.toJSON())}});return e}),define("views/scoreTableItem",["text!templates/table.html","views/scorecard","models/scorecard"],function(e,t,n){var r=Backbone.View.extend({tagName:"tr",className:"",template:_.template(e),events:{"click a":"scorecard"},initialize:function(){this.model.on("change",this.render,this),this.model.on("destroy",this.remove,this)},scorecard:function(e){e.preventDefault(),new t({model:new n(this.model.toJSON())})},render:function(){var e=$(this.el),t=this.template(this.model.toJSON());return e.html(t),e.addClass(this.model.get("className")),this}});return r}),define("models/sum",[],function(e,t){var n=Backbone.Model.extend({url:"scores",blank:{_id:"sum",isGoal:!0,date:new Date,courseName:"Sum",course:{name:""},tee:{name:""},score:0,stats:{handicap:0,GIR:0,putts:0,onePutts:0,threePutts:0,chipIn:0,shortGame:0,ch15:0,avgPuttsWithoutChip:0,avgPuttsWithChip:0,fairways:0,totalFairways:0,fairwayPercent:0,drivePoints:0,playable:0,playablePercent:0,chips:0,penalties:0,shortGamePercent:0,extra:0,scrambles:0,scrambleChances:0,scramblePercent:0,pars:0,bogies:0,birdies:0,extraChips:0,doubles:0,others:0,eagles:0}},initialize:function(){var e,t,n;e="Sum",t="Sum",n="goalFoot",this.set(this.blank),console.log("sum.isGoal",this.get("isGoal")),this.set({scrambleText:"",fairwayText:"",playableText:"",prettyDate:e,eagleAstrix:"",shortName:t,className:n})},count:0,add:function(e){this.sum("score",e);for(var t in this.blank.stats)this.sumStat(t,e);this.count++},roundNumbers:function(){for(var e in this.blank.stats)this.fixIt(e)},sum:function(e,t){var n=this.get(e);n=n*this.count+t.get(e),n/=this.count+1;var r={};r[e]=n,this.set(r)},sumStat:function(e,t){var n=this.get("stats"),r=n[e]*this.count+t.get("stats")[e];n[e]=r/(this.count+1),this.set({stats:n})},fixIt:function(e){var t=this.get("stats"),n=t[e],r;switch(e){case"handicap":case"putts":case"chipIn":case"avgPuttsWithoutChip":case"avgPuttsWithChip":case"extraChips":case"eagles":r=100;break;default:r=10}t[e]=Math.round(n*r)/r,this.set({stats:t})}});return n}),define("views/recentTable",["views/scoreTableItem","models/score","models/sum"],function(e,t,n){var r=Backbone.View.extend({el:"#recentTable",events:{},initialize:function(){},hide:function(){return this.$el.parent().parent().hide(),this},show:function(){return this.$el.parent().parent().show(),this},render:function(){console.log("rendering: score table view");var r=this;r.$el.empty();var i=new n;this.collection.last20().forEach(function(t){i.add(t);var n=new e({model:t});r.$el.append(n.render().el)}),i.roundNumbers();var s=new e({model:i});r.$el.append(s.render().el);var o=new e({model:new t(r.goalScore)});return r.$el.append(o.render().el),this.colorCells(),this},colorCells:function(){for(var e=3;e<=31;e++)switch(e){case 5:case 7:case 11:case 15:case 20:case 23:case 26:case 27:case 28:this.doAverages(e,!0);break;case 14:case 19:case 22:case 29:break;default:this.doAverages(e,!1)}},doAverages:function(e,t){var n=this.$el.find("tr:last-child").find(":nth-child("+e+")").html(),r=parseFloat(n);this.$el.find("td:nth-child("+e+")").each(function(){if($(this).parent().hasClass("goalFoot"))return;var e=parseFloat($(this).html()),n;e>r?n=!0:n=!1,(e==r||t&&n||!t&&!n)&&$(this).css("color","#002900").css("font-weight","800").css("background-color","#2fddff")})},goalScore:{_id:"goal",isGoal:!0,date:new Date,dateString:"*",courseName:"Goal",course:{name:""},tee:{name:""},score:86,stats:{handicap:13,GIR:7,putts:33,onePutts:5,threePutts:1,chipIn:1,shortGame:42,ch15:0,avgPuttsWithoutChip:2,avgPuttsWithChip:1.6,fairways:8,totalFairways:14,fairwayPercent:57,drivePoints:7,playable:12,playablePercent:85.7,chips:10,penalties:0,shortGamePercent:50,extra:2.5,scrambles:4,scrambleChances:10,scramblePercent:25,pars:9,bogies:7,birdies:1,extraChips:0,doubles:2,others:0,eagles:1}}});return r}),define("models/goal",[],function(){var e=Backbone.Model.extend({url:"goals",initialize:function(){}});return e}),define("collections/goallist",["models/goal"],function(e){var t=Backbone.Collection.extend({model:e,url:"goals"});return t}),define("text!templates/goal.html",[],function(){return'<td>{{index}}</td>\n<td class="text" title="{{text}}">{{id}}</td>\n<td>{{lastYear}}</td>\n<td>{{thisYear}}</td>\n<td>{{yearDiff}}</td>\n<td>{{goal}}</td>\n<td>{{goalDiff}}</td>'}),define("views/goal",["text!templates/goal.html"],function(e){var t=Backbone.View.extend({tagName:"tr",template:_.template(e),events:{},initialize:function(){this.model.on("change",this.render,this),this.model.on("destroy",this.remove,this)},render:function(){var e=$(this.el),t=this.template(this.model.toJSON());return e.html(t),this}});return t}),define("views/goals",["views/goal"],function(e){var t=Backbone.View.extend({el:"#goallist",tagName:"tbody",events:{},initialize:function(){},render:function(){var t=this;return t.$el.empty(),this.collection.forEach(function(n){console.log("goal calling render:",n);var r=new e({model:n});t.$el.append(r.render().el)}),this}});return t}),define("config",[],function(){var e={};return _.templateSettings.interpolate=/\{\{(.+?)\}\}/g,console.log("template settings set"),e}),define("models/course",[],function(){var e=Backbone.Model.extend({url:"courses",initialize:function(){}});return e}),define("collections/courselist",["models/course"],function(e){var t=Backbone.Collection.extend({model:e,url:"courses"});return t}),define("models/courseStats",[],function(){var e=Backbone.Model.extend({url:"course/stats",initialize:function(){}});return e}),define("text!templates/courseStats.html",[],function(){return'\n\n    \n<table cellpadding="0" cellspacing="0" class="table table-bordered table-striped table-hover scores">\n    <thead>\n    <tr>\n        <th>#</th>\n        <th>Fairway %</th>\n        <th>Playable %</th>\n        <th>GIR %</th>\n        <th>Avg Putts</th>\n        <th>Avg Score to Par</th>\n        <th>Total Penalties</th>\n    </tr>\n    </thead>\n    <tbody>\n    <% _.each(holes, function(hole) { %>\n    <tr>\n        <td>{{hole._id}}</td>\n        <td title="{{hole.value.fairway}} of {{hole.value.count}}">{{hole.value.fairwayPercent}}</td>\n        <td title="{{hole.value.playable}} of {{hole.value.count}}">{{hole.value.playablePercent}}</td>\n        <td title="{{hole.value.GIR}} of {{hole.value.count}}">{{hole.value.GIRPercent}}</td>\n        <td title="">{{hole.value.avgPutts}}</td>\n        <td title="">{{hole.value.avgScoreToPar}}</td>\n        <td>{{hole.value.penalties}}</td>\n    </tr>\n    <% }); %>\n    </tbody>\n</table>\n'}),define("views/courseStats",["text!templates/courseStats.html"],function(e){var t=Backbone.View.extend({tagName:"div",el:"#courseStats",template:_.template(e),events:{},initialize:function(){this.model.on("change",this.render,this),this.model.on("destroy",this.remove,this)},render:function(){console.log("rendering coures stats view",this.model.toJSON());var e=$(this.el),t=this.template(this.model.toJSON());return e.html(t),this}});return t}),define("text!templates/course.html",[],function(){return'<a href="#Coures/{{_id}}" class="showStats"><span>{{name}}</span></a>\n'}),define("views/course",["models/courseStats","views/courseStats","text!templates/course.html"],function(e,t,n){var r=Backbone.View.extend({tagName:"li",template:_.template(n),events:{"click a.showStats":"showStats"},initialize:function(){this.model.on("change",this.render,this),this.model.on("destroy",this.remove,this)},render:function(){var e=$(this.el),t=this.template(this.model.toJSON());return e.html(t),this},showStats:function(n){n.preventDefault(),this.$el.parent().find("a.active").removeClass("active"),this.$el.find("a").addClass("active");var r=this.model.get("_id"),i=this.model.get("name");console.log("fecthing stats for",r);var s=new e;s.fetch({data:{courseId:r},success:function(e){e.set({courseName:i});var n=new t({model:e});n.render()}})}});return r}),define("views/courses",["views/course"],function(e){var t=Backbone.View.extend({el:"#courselist",subEl:null,events:{},initialize:function(){},render:function(){var t=this;return t.$el.empty(),this.collection.forEach(function(n){console.log("course calling render:",n.get("name"));var r=new e({model:n});t.$el.append(r.render().el)}),this}});return t}),define("views/courseLayer",["collections/courselist","views/courses"],function(e,t){var n=Backbone.View.extend({el:"#courseLayer",tagName:"div",events:{},hide:function(){$(this.el).hide()},show:function(){var e=this;this.collections.courses.fetch({data:{},success:function(t){e.views.courses.render(),$(e.el).show()}})},collections:[],views:[],initialize:function(){this.collections.courses=new e,this.views.courses=new t({collection:this.collections.courses})},render:function(){return this}});return n}),define("app",["views/app","collections/scorelist","views/recent","views/recentTable","collections/goallist","views/goals","config","views/courseLayer"],function(e,t,n,r,i,s,o,u){var a=function(){console.log("app loaded"),this.views.app=new e,this.views.app.render(),this.collections.scores=new t,this.collections.goals=new i,this.views.recentTable=new r({collection:this.collections.scores}),this.views.goals=new s({collection:this.collections.goals}),this.views.courseLayer=new u,console.log("render!"),this.init()};return a.prototype={views:{},collections:{},init:function(){var e=this;e.collections.scores.fetch({data:{},success:function(t){e.views.recentTable.render()}}),e.collections.goals.fetch({data:{},success:function(t){e.views.goals.render()}}),e.views.courseLayer.hide(),$("body").on("click","#coursesLink",function(){e.views.recentTable.hide(),e.views.courseLayer.show()}),$("body").on("click","#scoresLink",function(){e.views.courseLayer.hide(),e.views.recentTable.show()}),$("div#courseLayer").hide(),e.views.courseLayer.hide()}},a}),requirejs.config({baseUrl:"app/js",paths:{text:"lib/text",xdate:"/public/xdate/xdate",scoreCalculator:"lib/scoreCalculator"},shim:{"/public/underscore/underscore-min.js":{exports:"_"},"/public/backbone/backbone-min.js":{deps:["/public/underscore/underscore-min.js"],exports:"Backbone"},app:{deps:["/public/underscore/underscore-min.js","/public/backbone/backbone-min.js"]}}}),require(["app"],function(e){console.log("main.js App is created"),_.templateSettings={interpolate:/\{\{(.+?)\}\}/g},window.Golf=new e}),define("main",function(){}),function(){var e=this,t=e._,n={},r=Array.prototype,i=Object.prototype,s=Function.prototype,o=r.push,u=r.slice,a=r.concat,f=i.toString,l=i.hasOwnProperty,c=r.forEach,h=r.map,p=r.reduce,d=r.reduceRight,v=r.filter,m=r.every,g=r.some,y=r.indexOf,b=r.lastIndexOf,w=Array.isArray,E=Object.keys,S=s.bind,x=function(e){return e instanceof x?e:this instanceof x?(this._wrapped=e,void 0):new x(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=x),exports._=x):e._=x,x.VERSION="1.4.4";var T=x.each=x.forEach=function(e,t,r){if(null!=e)if(c&&e.forEach===c)e.forEach(t,r);else if(e.length===+e.length){for(var i=0,s=e.length;s>i;i++)if(t.call(r,e[i],i,e)===n)return}else for(var o in e)if(x.has(e,o)&&t.call(r,e[o],o,e)===n)return};x.map=x.collect=function(e,t,n){var r=[];return null==e?r:h&&e.map===h?e.map(t,n):(T(e,function(e,i,s){r[r.length]=t.call(n,e,i,s)}),r)};var N="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(e,t,n,r){var i=arguments.length>2;if(null==e&&(e=[]),p&&e.reduce===p)return r&&(t=x.bind(t,r)),i?e.reduce(t,n):e.reduce(t);if(T(e,function(e,s,o){i?n=t.call(r,n,e,s,o):(n=e,i=!0)}),!i)throw new TypeError(N);return n},x.reduceRight=x.foldr=function(e,t,n,r){var i=arguments.length>2;if(null==e&&(e=[]),d&&e.reduceRight===d)return r&&(t=x.bind(t,r)),i?e.reduceRight(t,n):e.reduceRight(t);var s=e.length;if(s!==+s){var o=x.keys(e);s=o.length}if(T(e,function(u,a,f){a=o?o[--s]:--s,i?n=t.call(r,n,e[a],a,f):(n=e[a],i=!0)}),!i)throw new TypeError(N);return n},x.find=x.detect=function(e,t,n){var r;return C(e,function(e,i,s){return t.call(n,e,i,s)?(r=e,!0):void 0}),r},x.filter=x.select=function(e,t,n){var r=[];return null==e?r:v&&e.filter===v?e.filter(t,n):(T(e,function(e,i,s){t.call(n,e,i,s)&&(r[r.length]=e)}),r)},x.reject=function(e,t,n){return x.filter(e,function(e,r,i){return!t.call(n,e,r,i)},n)},x.every=x.all=function(e,t,r){t||(t=x.identity);var i=!0;return null==e?i:m&&e.every===m?e.every(t,r):(T(e,function(e,s,o){return(i=i&&t.call(r,e,s,o))?void 0:n}),!!i)};var C=x.some=x.any=function(e,t,r){t||(t=x.identity);var i=!1;return null==e?i:g&&e.some===g?e.some(t,r):(T(e,function(e,s,o){return i||(i=t.call(r,e,s,o))?n:void 0}),!!i)};x.contains=x.include=function(e,t){return null==e?!1:y&&e.indexOf===y?e.indexOf(t)!=-1:C(e,function(e){return e===t})},x.invoke=function(e,t){var n=u.call(arguments,2),r=x.isFunction(t);return x.map(e,function(e){return(r?t:e[t]).apply(e,n)})},x.pluck=function(e,t){return x.map(e,function(e){return e[t]})},x.where=function(e,t,n){return x.isEmpty(t)?n?null:[]:x[n?"find":"filter"](e,function(e){for(var n in t)if(t[n]!==e[n])return!1;return!0})},x.findWhere=function(e,t){return x.where(e,t,!0)},x.max=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&65535>e.length)return Math.max.apply(Math,e);if(!t&&x.isEmpty(e))return-1/0;var r={computed:-1/0,value:-1/0};return T(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o>=r.computed&&(r={value:e,computed:o})}),r.value},x.min=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&65535>e.length)return Math.min.apply(Math,e);if(!t&&x.isEmpty(e))return 1/0;var r={computed:1/0,value:1/0};return T(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;r.computed>o&&(r={value:e,computed:o})}),r.value},x.shuffle=function(e){var t,n=0,r=[];return T(e,function(e){t=x.random(n++),r[n-1]=r[t],r[t]=e}),r};var k=function(e){return x.isFunction(e)?e:function(t){return t[e]}};x.sortBy=function(e,t,n){var r=k(t);return x.pluck(x.map(e,function(e,t,i){return{value:e,index:t,criteria:r.call(n,e,t,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||n===void 0)return 1;if(r>n||r===void 0)return-1}return e.index<t.index?-1:1}),"value")};var L=function(e,t,n,r){var i={},s=k(t||x.identity);return T(e,function(t,o){var u=s.call(n,t,o,e);r(i,u,t)}),i};x.groupBy=function(e,t,n){return L(e,t,n,function(e,t,n){(x.has(e,t)?e[t]:e[t]=[]).push(n)})},x.countBy=function(e,t,n){return L(e,t,n,function(e,t){x.has(e,t)||(e[t]=0),e[t]++})},x.sortedIndex=function(e,t,n,r){n=null==n?x.identity:k(n);for(var i=n.call(r,t),s=0,o=e.length;o>s;){var u=s+o>>>1;i>n.call(r,e[u])?s=u+1:o=u}return s},x.toArray=function(e){return e?x.isArray(e)?u.call(e):e.length===+e.length?x.map(e,x.identity):x.values(e):[]},x.size=function(e){return null==e?0:e.length===+e.length?e.length:x.keys(e).length},x.first=x.head=x.take=function(e,t,n){return null==e?void 0:null==t||n?e[0]:u.call(e,0,t)},x.initial=function(e,t,n){return u.call(e,0,e.length-(null==t||n?1:t))},x.last=function(e,t,n){return null==e?void 0:null==t||n?e[e.length-1]:u.call(e,Math.max(e.length-t,0))},x.rest=x.tail=x.drop=function(e,t,n){return u.call(e,null==t||n?1:t)},x.compact=function(e){return x.filter(e,x.identity)};var A=function(e,t,n){return T(e,function(e){x.isArray(e)?t?o.apply(n,e):A(e,t,n):n.push(e)}),n};x.flatten=function(e,t){return A(e,t,[])},x.without=function(e){return x.difference(e,u.call(arguments,1))},x.uniq=x.unique=function(e,t,n,r){x.isFunction(t)&&(r=n,n=t,t=!1);var i=n?x.map(e,n,r):e,s=[],o=[];return T(i,function(n,r){(t?r&&o[o.length-1]===n:x.contains(o,n))||(o.push(n),s.push(e[r]))}),s},x.union=function(){return x.uniq(a.apply(r,arguments))},x.intersection=function(e){var t=u.call(arguments,1);return x.filter(x.uniq(e),function(e){return x.every(t,function(t){return x.indexOf(t,e)>=0})})},x.difference=function(e){var t=a.apply(r,u.call(arguments,1));return x.filter(e,function(e){return!x.contains(t,e)})},x.zip=function(){for(var e=u.call(arguments),t=x.max(x.pluck(e,"length")),n=Array(t),r=0;t>r;r++)n[r]=x.pluck(e,""+r);return n},x.object=function(e,t){if(null==e)return{};for(var n={},r=0,i=e.length;i>r;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},x.indexOf=function(e,t,n){if(null==e)return-1;var r=0,i=e.length;if(n){if("number"!=typeof n)return r=x.sortedIndex(e,t),e[r]===t?r:-1;r=0>n?Math.max(0,i+n):n}if(y&&e.indexOf===y)return e.indexOf(t,n);for(;i>r;r++)if(e[r]===t)return r;return-1},x.lastIndexOf=function(e,t,n){if(null==e)return-1;var r=null!=n;if(b&&e.lastIndexOf===b)return r?e.lastIndexOf(t,n):e.lastIndexOf(t);for(var i=r?n:e.length;i--;)if(e[i]===t)return i;return-1},x.range=function(e,t,n){1>=arguments.length&&(t=e||0,e=0),n=arguments[2]||1;for(var r=Math.max(Math.ceil((t-e)/n),0),i=0,s=Array(r);r>i;)s[i++]=e,e+=n;return s},x.bind=function(e,t){if(e.bind===S&&S)return S.apply(e,u.call(arguments,1));var n=u.call(arguments,2);return function(){return e.apply(t,n.concat(u.call(arguments)))}},x.partial=function(e){var t=u.call(arguments,1);return function(){return e.apply(this,t.concat(u.call(arguments)))}},x.bindAll=function(e){var t=u.call(arguments,1);return 0===t.length&&(t=x.functions(e)),T(t,function(t){e[t]=x.bind(e[t],e)}),e},x.memoize=function(e,t){var n={};return t||(t=x.identity),function(){var r=t.apply(this,arguments);return x.has(n,r)?n[r]:n[r]=e.apply(this,arguments)}},x.delay=function(e,t){var n=u.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},x.defer=function(e){return x.delay.apply(x,[e,1].concat(u.call(arguments,1)))},x.throttle=function(e,t){var n,r,i,s,o=0,u=function(){o=new Date,i=null,s=e.apply(n,r)};return function(){var a=new Date,f=t-(a-o);return n=this,r=arguments,0>=f?(clearTimeout(i),i=null,o=a,s=e.apply(n,r)):i||(i=setTimeout(u,f)),s}},x.debounce=function(e,t,n){var r,i;return function(){var s=this,o=arguments,u=function(){r=null,n||(i=e.apply(s,o))},a=n&&!r;return clearTimeout(r),r=setTimeout(u,t),a&&(i=e.apply(s,o)),i}},x.once=function(e){var t,n=!1;return function(){return n?t:(n=!0,t=e.apply(this,arguments),e=null,t)}},x.wrap=function(e,t){return function(){var n=[e];return o.apply(n,arguments),t.apply(this,n)}},x.compose=function(){var e=arguments;return function(){for(var t=arguments,n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},x.after=function(e,t){return 0>=e?t():function(){return 1>--e?t.apply(this,arguments):void 0}},x.keys=E||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)x.has(e,n)&&(t[t.length]=n);return t},x.values=function(e){var t=[];for(var n in e)x.has(e,n)&&t.push(e[n]);return t},x.pairs=function(e){var t=[];for(var n in e)x.has(e,n)&&t.push([n,e[n]]);return t},x.invert=function(e){var t={};for(var n in e)x.has(e,n)&&(t[e[n]]=n);return t},x.functions=x.methods=function(e){var t=[];for(var n in e)x.isFunction(e[n])&&t.push(n);return t.sort()},x.extend=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},x.pick=function(e){var t={},n=a.apply(r,u.call(arguments,1));return T(n,function(n){n in e&&(t[n]=e[n])}),t},x.omit=function(e){var t={},n=a.apply(r,u.call(arguments,1));for(var i in e)x.contains(n,i)||(t[i]=e[i]);return t},x.defaults=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)null==e[n]&&(e[n]=t[n])}),e},x.clone=function(e){return x.isObject(e)?x.isArray(e)?e.slice():x.extend({},e):e},x.tap=function(e,t){return t(e),e};var O=function(e,t,n,r){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof x&&(e=e._wrapped),t instanceof x&&(t=t._wrapped);var i=f.call(e);if(i!=f.call(t))return!1;switch(i){case"[object String]":return e==t+"";case"[object Number]":return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if("object"!=typeof e||"object"!=typeof t)return!1;for(var s=n.length;s--;)if(n[s]==e)return r[s]==t;n.push(e),r.push(t);var o=0,u=!0;if("[object Array]"==i){if(o=e.length,u=o==t.length)for(;o--&&(u=O(e[o],t[o],n,r)););}else{var a=e.constructor,l=t.constructor;if(a!==l&&!(x.isFunction(a)&&a instanceof a&&x.isFunction(l)&&l instanceof l))return!1;for(var c in e)if(x.has(e,c)&&(o++,!(u=x.has(t,c)&&O(e[c],t[c],n,r))))break;if(u){for(c in t)if(x.has(t,c)&&!(o--))break;u=!o}}return n.pop(),r.pop(),u};x.isEqual=function(e,t){return O(e,t,[],[])},x.isEmpty=function(e){if(null==e)return!0;if(x.isArray(e)||x.isString(e))return 0===e.length;for(var t in e)if(x.has(e,t))return!1;return!0},x.isElement=function(e){return!!e&&1===e.nodeType},x.isArray=w||function(e){return"[object Array]"==f.call(e)},x.isObject=function(e){return e===Object(e)},T(["Arguments","Function","String","Number","Date","RegExp"],function(e){x["is"+e]=function(t){return f.call(t)=="[object "+e+"]"}}),x.isArguments(arguments)||(x.isArguments=function(e){return!!e&&!!x.has(e,"callee")}),"function"!=typeof /./&&(x.isFunction=function(e){return"function"==typeof e}),x.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},x.isNaN=function(e){return x.isNumber(e)&&e!=+e},x.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==f.call(e)},x.isNull=function(e){return null===e},x.isUndefined=function(e){return e===void 0},x.has=function(e,t){return l.call(e,t)},x.noConflict=function(){return e._=t,this},x.identity=function(e){return e},x.times=function(e,t,n){for(var r=Array(e),i=0;e>i;i++)r[i]=t.call(n,i);return r},x.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))};var M={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};M.unescape=x.invert(M.escape);var _={escape:RegExp("["+x.keys(M.escape).join("")+"]","g"),unescape:RegExp("("+x.keys(M.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(e){x[e]=function(t){return null==t?"":(""+t).replace(_[e],function(t){return M[e][t]})}}),x.result=function(e,t){if(null==e)return null;var n=e[t];return x.isFunction(n)?n.call(e):n},x.mixin=function(e){T(x.functions(e),function(t){var n=x[t]=e[t];x.prototype[t]=function(){var e=[this._wrapped];return o.apply(e,arguments),j.call(this,n.apply(x,e))}})};var D=0;x.uniqueId=function(e){var t=++D+"";return e?e+t:t},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var P=/(.)^/,H={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},B=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(e,t,n){var r;n=x.defaults({},n,x.templateSettings);var i=RegExp([(n.escape||P).source,(n.interpolate||P).source,(n.evaluate||P).source].join("|")+"|$","g"),s=0,o="__p+='";e.replace(i,function(t,n,r,i,u){return o+=e.slice(s,u).replace(B,function(e){return"\\"+H[e]}),n&&(o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),r&&(o+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),i&&(o+="';\n"+i+"\n__p+='"),s=u+t.length,t}),o+="';\n",n.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{r=Function(n.variable||"obj","_",o)}catch(u){throw u.source=o,u}if(t)return r(t,x);var a=function(e){return r.call(this,e,x)};return a.source="function("+(n.variable||"obj")+"){\n"+o+"}",a},x.chain=function(e){return x(e).chain()};var j=function(e){return this._chain?x(e).chain():e};x.mixin(x),T(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=r[e];x.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!=e&&"splice"!=e||0!==n.length||delete n[0],j.call(this,n)}}),T(["concat","join","slice"],function(e){var t=r[e];x.prototype[e]=function(){return j.call(this,t.apply(this._wrapped,arguments))}}),x.extend(x.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this),define("underscore",function(){}),function(){var e=this,t=e.Backbone,n=[],r=n.push,i=n.slice,s=n.splice,o;typeof exports!="undefined"?o=exports:o=e.Backbone={},o.VERSION="1.0.0";var u=e._;!u&&typeof require!="undefined"&&(u=require("underscore")),o.$=e.jQuery||e.Zepto||e.ender||e.$,o.noConflict=function(){return e.Backbone=t,this},o.emulateHTTP=!1,o.emulateJSON=!1;var a=o.Events={on:function(e,t,n){if(!l(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var r=this._events[e]||(this._events[e]=[]);return r.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,n){if(!l(this,"once",e,[t,n])||!t)return this;var r=this,i=u.once(function(){r.off(e,i),t.apply(this,arguments)});return i._callback=t,this.on(e,i,n)},off:function(e,t,n){var r,i,s,o,a,f,c,h;if(!this._events||!l(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events={},this;o=e?[e]:u.keys(this._events);for(a=0,f=o.length;a<f;a++){e=o[a];if(s=this._events[e]){this._events[e]=r=[];if(t||n)for(c=0,h=s.length;c<h;c++)i=s[c],(t&&t!==i.callback&&t!==i.callback._callback||n&&n!==i.context)&&r.push(i);r.length||delete this._events[e]}}return this},trigger:function(e){if(!this._events)return this;var t=i.call(arguments,1);if(!l(this,"trigger",e,t))return this;var n=this._events[e],r=this._events.all;return n&&c(n,t),r&&c(r,arguments),this},stopListening:function(e,t,n){var r=this._listeners;if(!r)return this;var i=!t&&!n;typeof t=="object"&&(n=this),e&&((r={})[e._listenerId]=e);for(var s in r)r[s].off(t,n,this),i&&delete this._listeners[s];return this}},f=/\s+/,l=function(e,t,n,r){if(!n)return!0;if(typeof n=="object"){for(var i in n)e[t].apply(e,[i,n[i]].concat(r));return!1}if(f.test(n)){var s=n.split(f);for(var o=0,u=s.length;o<u;o++)e[t].apply(e,[s[o]].concat(r));return!1}return!0},c=function(e,t){var n,r=-1,i=e.length,s=t[0],o=t[1],u=t[2];switch(t.length){case 0:while(++r<i)(n=e[r]).callback.call(n.ctx);return;case 1:while(++r<i)(n=e[r]).callback.call(n.ctx,s);return;case 2:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o);return;case 3:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o,u);return;default:while(++r<i)(n=e[r]).callback.apply(n.ctx,t)}},h={listenTo:"on",listenToOnce:"once"};u.each(h,function(e,t){a[t]=function(t,n,r){var i=this._listeners||(this._listeners={}),s=t._listenerId||(t._listenerId=u.uniqueId("l"));return i[s]=t,typeof n=="object"&&(r=this),t[e](n,r,this),this}}),a.bind=a.on,a.unbind=a.off,u.extend(o,a);var p=o.Model=function(e,t){var n,r=e||{};t||(t={}),this.cid=u.uniqueId("c"),this.attributes={},u.extend(this,u.pick(t,d)),t.parse&&(r=this.parse(r,t)||{});if(n=u.result(this,"defaults"))r=u.defaults({},r,n);this.set(r,t),this.changed={},this.initialize.apply(this,arguments)},d=["url","urlRoot","collection"];u.extend(p.prototype,a,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(e){return u.clone(this.attributes)},sync:function(){return o.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return u.escape(this.get(e))},has:function(e){return this.get(e)!=null},set:function(e,t,n){var r,i,s,o,a,f,l,c;if(e==null)return this;typeof e=="object"?(i=e,n=t):(i={})[e]=t,n||(n={});if(!this._validate(i,n))return!1;s=n.unset,a=n.silent,o=[],f=this._changing,this._changing=!0,f||(this._previousAttributes=u.clone(this.attributes),this.changed={}),c=this.attributes,l=this._previousAttributes,this.idAttribute in i&&(this.id=i[this.idAttribute]);for(r in i)t=i[r],u.isEqual(c[r],t)||o.push(r),u.isEqual(l[r],t)?delete this.changed[r]:this.changed[r]=t,s?delete c[r]:c[r]=t;if(!a){o.length&&(this._pending=!0);for(var h=0,p=o.length;h<p;h++)this.trigger("change:"+o[h],this,c[o[h]],n)}if(f)return this;if(!a)while(this._pending)this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,u.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var n in this.attributes)t[n]=void 0;return this.set(t,u.extend({},e,{unset:!0}))},hasChanged:function(e){return e==null?!u.isEmpty(this.changed):u.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?u.clone(this.changed):!1;var t,n=!1,r=this._changing?this._previousAttributes:this.attributes;for(var i in e){if(u.isEqual(r[i],t=e[i]))continue;(n||(n={}))[i]=t}return n},previous:function(e){return e==null||!this._previousAttributes?null:this._previousAttributes[e]},previousAttributes:function(){return u.clone(this._previousAttributes)},fetch:function(e){e=e?u.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=this,n=e.success;return e.success=function(r){if(!t.set(t.parse(r,e),e))return!1;n&&n(t,r,e),t.trigger("sync",t,r,e)},j(this,e),this.sync("read",this,e)},save:function(e,t,n){var r,i,s,o=this.attributes;e==null||typeof e=="object"?(r=e,n=t):(r={})[e]=t;if(r&&(!n||!n.wait)&&!this.set(r,n))return!1;n=u.extend({validate:!0},n);if(!this._validate(r,n))return!1;r&&n.wait&&(this.attributes=u.extend({},o,r)),n.parse===void 0&&(n.parse=!0);var a=this,f=n.success;return n.success=function(e){a.attributes=o;var t=a.parse(e,n);n.wait&&(t=u.extend(r||{},t));if(u.isObject(t)&&!a.set(t,n))return!1;f&&f(a,e,n),a.trigger("sync",a,e,n)},j(this,n),i=this.isNew()?"create":n.patch?"patch":"update",i==="patch"&&(n.attrs=r),s=this.sync(i,this,n),r&&n.wait&&(this.attributes=o),s},destroy:function(e){e=e?u.clone(e):{};var t=this,n=e.success,r=function(){t.trigger("destroy",t,t.collection,e)};e.success=function(i){(e.wait||t.isNew())&&r(),n&&n(t,i,e),t.isNew()||t.trigger("sync",t,i,e)};if(this.isNew())return e.success(),!1;j(this,e);var i=this.sync("delete",this,e);return e.wait||r(),i},url:function(){var e=u.result(this,"urlRoot")||u.result(this.collection,"url")||B();return this.isNew()?e:e+(e.charAt(e.length-1)==="/"?"":"/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return this.id==null},isValid:function(e){return this._validate({},u.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=u.extend({},this.attributes,e);var n=this.validationError=this.validate(e,t)||null;return n?(this.trigger("invalid",this,n,u.extend(t||{},{validationError:n})),!1):!0}});var v=["keys","values","pairs","invert","pick","omit"];u.each(v,function(e){p.prototype[e]=function(){var t=i.call(arguments);return t.unshift(this.attributes),u[e].apply(u,t)}});var m=o.Collection=function(e,t){t||(t={}),t.url&&(this.url=t.url),t.model&&(this.model=t.model),t.comparator!==void 0&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,u.extend({silent:!0},t))},g={add:!0,remove:!0,merge:!0},y={add:!0,merge:!1,remove:!1};u.extend(m.prototype,a,{model:p,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return o.sync.apply(this,arguments)},add:function(e,t){return this.set(e,u.defaults(t||{},y))},remove:function(e,t){e=u.isArray(e)?e.slice():[e],t||(t={});var n,r,i,s;for(n=0,r=e.length;n<r;n++){s=this.get(e[n]);if(!s)continue;delete this._byId[s.id],delete this._byId[s.cid],i=this.indexOf(s),this.models.splice(i,1),this.length--,t.silent||(t.index=i,s.trigger("remove",s,this,t)),this._removeReference(s)}return this},set:function(e,t){t=u.defaults(t||{},g),t.parse&&(e=this.parse(e,t)),u.isArray(e)||(e=e?[e]:[]);var n,i,o,a,f,l,c=t.at,h=this.comparator&&c==null&&t.sort!==!1,p=u.isString(this.comparator)?this.comparator:null,d=[],v=[],m={};for(n=0,i=e.length;n<i;n++){if(!(o=this._prepareModel(e[n],t)))continue;(f=this.get(o))?(t.remove&&(m[f.cid]=!0),t.merge&&(f.set(o.attributes,t),h&&!l&&f.hasChanged(p)&&(l=!0))):t.add&&(d.push(o),o.on("all",this._onModelEvent,this),this._byId[o.cid]=o,o.id!=null&&(this._byId[o.id]=o))}if(t.remove){for(n=0,i=this.length;n<i;++n)m[(o=this.models[n]).cid]||v.push(o);v.length&&this.remove(v,t)}d.length&&(h&&(l=!0),this.length+=d.length,c!=null?s.apply(this.models,[c,0].concat(d)):r.apply(this.models,d)),l&&this.sort({silent:!0});if(t.silent)return this;for(n=0,i=d.length;n<i;n++)(o=d[n]).trigger("add",o,this,t);return l&&this.trigger("sort",this,t),this},reset:function(e,t){t||(t={});for(var n=0,r=this.models.length;n<r;n++)this._removeReference(this.models[n]);return t.previousModels=this.models,this._reset(),this.add(e,u.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),this},push:function(e,t){return e=this._prepareModel(e,t),this.add(e,u.extend({at:this.length},t)),e},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return e=this._prepareModel(e,t),this.add(e,u.extend({at:0},t)),e},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(e,t){return this.models.slice(e,t)},get:function(e){return e==null?void 0:this._byId[e.id!=null?e.id:e.cid||e]},at:function(e){return this.models[e]},where:function(e,t){return u.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),u.isString(this.comparator)||this.comparator.length===1?this.models=this.sortBy(this.comparator,this):this.models.sort(u.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},sortedIndex:function(e,t,n){t||(t=this.comparator);var r=u.isFunction(t)?t:function(e){return e.get(t)};return u.sortedIndex(this.models,e,r,n)},pluck:function(e){return u.invoke(this.models,"get",e)},fetch:function(e){e=e?u.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=e.success,n=this;return e.success=function(r){var i=e.reset?"reset":"set";n[i](r,e),t&&t(n,r,e),n.trigger("sync",n,r,e)},j(this,e),this.sync("read",this,e)},create:function(e,t){t=t?u.clone(t):{};if(!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var n=this,r=t.success;return t.success=function(i){t.wait&&n.add(e,t),r&&r(e,i,t)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof p)return e.collection||(e.collection=this),e;t||(t={}),t.collection=this;var n=new this.model(e,t);return n._validate(e,t)?n:(this.trigger("invalid",this,e,t),!1)},_removeReference:function(e){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){if((e==="add"||e==="remove")&&n!==this)return;e==="destroy"&&this.remove(t,r),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],t.id!=null&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments)}});var b=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];u.each(b,function(e){m.prototype[e]=function(){var t=i.call(arguments);return t.unshift(this.models),u[e].apply(u,t)}});var w=["groupBy","countBy","sortBy"];u.each(w,function(e){m.prototype[e]=function(t,n){var r=u.isFunction(t)?t:function(e){return e.get(t)};return u[e](this.models,r,n)}});var E=o.View=function(e){this.cid=u.uniqueId("view"),this._configure(e||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},S=/^(\S+)\s*(.*)$/,x=["model","collection","el","id","attributes","className","tagName","events"];u.extend(E.prototype,a,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,t){return this.$el&&this.undelegateEvents(),this.$el=e instanceof o.$?e:o.$(e),this.el=this.$el[0],t!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=u.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var n=e[t];u.isFunction(n)||(n=this[e[t]]);if(!n)continue;var r=t.match(S),i=r[1],s=r[2];n=u.bind(n,this),i+=".delegateEvents"+this.cid,s===""?this.$el.on(i,n):this.$el.on(i,s,n)}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_configure:function(e){this.options&&(e=u.extend({},u.result(this,"options"),e)),u.extend(this,u.pick(e,x)),this.options=e},_ensureElement:function(){if(!this.el){var e=u.extend({},u.result(this,"attributes"));this.id&&(e.id=u.result(this,"id")),this.className&&(e["class"]=u.result(this,"className"));var t=o.$("<"+u.result(this,"tagName")+">").attr(e);this.setElement(t,!1)}else this.setElement(u.result(this,"el"),!1)}}),o.sync=function(e,t,n){var r=T[e];u.defaults(n||(n={}),{emulateHTTP:o.emulateHTTP,emulateJSON:o.emulateJSON});var i={type:r,dataType:"json"};n.url||(i.url=u.result(t,"url")||B()),n.data==null&&t&&(e==="create"||e==="update"||e==="patch")&&(i.contentType="application/json",i.data=JSON.stringify(n.attrs||t.toJSON(n))),n.emulateJSON&&(i.contentType="application/x-www-form-urlencoded",i.data=i.data?{model:i.data}:{});if(n.emulateHTTP&&(r==="PUT"||r==="DELETE"||r==="PATCH")){i.type="POST",n.emulateJSON&&(i.data._method=r);var s=n.beforeSend;n.beforeSend=function(e){e.setRequestHeader("X-HTTP-Method-Override",r);if(s)return s.apply(this,arguments)}}i.type!=="GET"&&!n.emulateJSON&&(i.processData=!1),i.type==="PATCH"&&window.ActiveXObject&&(!window.external||!window.external.msActiveXFilteringEnabled)&&(i.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var a=n.xhr=o.ajax(u.extend(i,n));return t.trigger("request",t,a,n),a};var T={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};o.ajax=function(){return o.$.ajax.apply(o.$,arguments)};var N=o.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},C=/\((.*?)\)/g,k=/(\(\?)?:\w+/g,L=/\*\w+/g,A=/[\-{}\[\]+?.,\\\^$|#\s]/g;u.extend(N.prototype,a,{initialize:function(){},route:function(e,t,n){u.isRegExp(e)||(e=this._routeToRegExp(e)),u.isFunction(t)&&(n=t,t=""),n||(n=this[t]);var r=this;return o.history.route(e,function(i){var s=r._extractParameters(e,i);n&&n.apply(r,s),r.trigger.apply(r,["route:"+t].concat(s)),r.trigger("route",t,s),o.history.trigger("route",r,t,s)}),this},navigate:function(e,t){return o.history.navigate(e,t),this},_bindRoutes:function(){if(!this.routes)return;this.routes=u.result(this,"routes");var e,t=u.keys(this.routes);while((e=t.pop())!=null)this.route(e,this.routes[e])},_routeToRegExp:function(e){return e=e.replace(A,"\\$&").replace(C,"(?:$1)?").replace(k,function(e,t){return t?e:"([^/]+)"}).replace(L,"(.*?)"),new RegExp("^"+e+"$")},_extractParameters:function(e,t){var n=e.exec(t).slice(1);return u.map(n,function(e){return e?decodeURIComponent(e):null})}});var O=o.History=function(){this.handlers=[],u.bindAll(this,"checkUrl"),typeof window!="undefined"&&(this.location=window.location,this.history=window.history)},M=/^[#\/]|\s+$/g,_=/^\/+|\/+$/g,D=/msie [\w.]+/,P=/\/$/;O.started=!1,u.extend(O.prototype,a,{interval:50,getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(e==null)if(this._hasPushState||!this._wantsHashChange||t){e=this.location.pathname;var n=this.root.replace(P,"");e.indexOf(n)||(e=e.substr(n.length))}else e=this.getHash();return e.replace(M,"")},start:function(e){if(O.started)throw new Error("Backbone.history has already been started");O.started=!0,this.options=u.extend({},{root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var t=this.getFragment(),n=document.documentMode,r=D.exec(navigator.userAgent.toLowerCase())&&(!n||n<=7);this.root=("/"+this.root+"/").replace(_,"/"),r&&this._wantsHashChange&&(this.iframe=o.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(t)),this._hasPushState?o.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!r?o.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=t;var i=this.location,s=i.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!s)return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0;this._wantsPushState&&this._hasPushState&&s&&i.hash&&(this.fragment=this.getHash().replace(M,""),this.history.replaceState({},document.title,this.root+this.fragment+i.search));if(!this.options.silent)return this.loadUrl()},stop:function(){o.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),O.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe)));if(t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(e){var t=this.fragment=this.getFragment(e),n=u.any(this.handlers,function(e){if(e.route.test(t))return e.callback(t),!0});return n},navigate:function(e,t){if(!O.started)return!1;if(!t||t===!0)t={trigger:t};e=this.getFragment(e||"");if(this.fragment===e)return;this.fragment=e;var n=this.root+e;if(this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}t.trigger&&this.loadUrl(e)},_updateHash:function(e,t,n){if(n){var r=e.href.replace(/(javascript:|#).*$/,"");e.replace(r+"#"+t)}else e.hash="#"+t}}),o.history=new O;var H=function(e,t){var n=this,r;e&&u.has(e,"constructor")?r=e.constructor:r=function(){return n.apply(this,arguments)},u.extend(r,n,t);var i=function(){this.constructor=r};return i.prototype=n.prototype,r.prototype=new i,e&&u.extend(r.prototype,e),r.__super__=n.prototype,r};p.extend=m.extend=N.extend=E.extend=O.extend=H;var B=function(){throw new Error('A "url" property or function must be specified')},j=function(e,t){var n=t.error;t.error=function(r){n&&n(e,r,t),e.trigger("error",e,r,t)}}}.call(this),define("Backbone",function(){});